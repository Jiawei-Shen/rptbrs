(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-array"),require("d3-scale"),require("d3-time"),require("d3-random"),require("d3-fetch"),require("d3-path"),require("d3-selection"),require("d3-shape"),require("d3-scale-chromatic"),require("d3-dispatch"),require("d3-brush"),require("d3-zoom")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-scale","d3-time","d3-random","d3-fetch","d3-path","d3-selection","d3-shape","d3-scale-chromatic","d3-dispatch","d3-brush","d3-zoom"],t):(e="undefined"==typeof globalThis?e||self:globalThis,t(e.fc={},e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3))})(this,function(e,t,a,n,i,l,r,o,d,s,c,h,g){'use strict';var ge=Math.round,ue=Math.floor,fe=Math.min,pe=Math.ceil,ye=Math.exp,me=Math.max,be=Math.abs;function u(e){return e}function f(){}function p(e){return"function"==typeof e?e:function(){return e}}function y(e){return"number"==typeof e&&isNaN(e)?void 0:e}function m(){var e=function(){return 10},t=f,a=u,n=function(e){return null!=e},i=function(i){var l=e.apply(this,arguments),r=i.slice(0,l).map(a);return i.map(function(e,o){return o>=l&&(r.shift(),r.push(a(e,o))),o<l-1||r.some(function(e){return!n(e)})?t(void 0,o):t(r,o)})};return i.period=function(){return arguments.length?(e=p(0>=arguments.length?void 0:arguments[0]),i):e},i.accumulator=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],i):t},i.defined=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],i):n},i.value=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],i):a},i}function b(){var e=2,a=m().accumulator(function(a){var n=a&&t.deviation(a),i=a&&t.mean(a);return{average:i,upper:y(i+e*n),lower:y(i-e*n)}}),n=function(e){return a(e)};return n.multiplier=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],n):e},xe(n,a,"period","value"),n}function v(){var e=u,a=function(){return 9},n=function(e){var a=[];return function(n){var i;return a.length<e&&(null==n?a=[]:a.push(n)),a.length>=e&&(i=t.mean(a)),i}},i=function(t){var i=a.apply(this,arguments),l=2/(i+1),r=n(i),o;return t.map(function(t,a){var n=e(t,a);return o=void 0===o?r(n):n*l+(1-l)*o,y(o)})};return i.period=function(){return arguments.length?(a=p(0>=arguments.length?void 0:arguments[0]),i):a},i.value=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],i):e},i}function x(){var e=u,a=v().period(12),n=v().period(26),i=v().period(9),l=function(l){a.value(e),n.value(e);var r=t.zip(a(l),n(l)).map(function(e){return void 0!==e[0]&&void 0!==e[1]?e[0]-e[1]:void 0}),o=i(r);return t.zip(r,o).map(function(e){return{macd:e[0],signal:e[1],divergence:void 0!==e[0]&&void 0!==e[1]?e[0]-e[1]:void 0}})};return l.value=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},we(l,a,Ae({period:"fastPeriod"})),we(l,n,Ae({period:"slowPeriod"})),we(l,i,Ae({period:"signalPeriod"})),l}function S(e){"@babel/helpers - typeof";return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function k(e,t,a){return t&&V(e.prototype,t),a&&V(e,a),e}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function D(){return D=E()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=Function.bind.apply(e,i),l=new a;return n&&_(l,n.prototype),l},D.apply(null,arguments)}function z(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function I(e){var t="function"==typeof Map?new Map:void 0;return I=function(e){function a(){return D(e,arguments,A(this).constructor)}if(null===e||!z(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof t){if(t.has(e))return t.get(e);t.set(e,a)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),_(a,e)},I(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return t&&("object"==typeof t||"function"==typeof t)?t:N(e)}function T(e){var t=E();return function(){var a=A(e),n;if(t){var i=A(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return P(this,n)}}function B(e,t){return M(e)||O(e,t)||H(e,t)||U()}function R(e){return M(e)||W(e)||H(e)||U()}function Y(e){return L(e)||W(e)||H(e)||G()}function L(e){if(Array.isArray(e))return F(e)}function M(e){if(Array.isArray(e))return e}function W(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function O(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,i=!1,l=void 0;try{for(var r=e[Symbol.iterator](),o;!(n=(o=r.next()).done)&&(a.push(o.value),!(t&&a.length===t));n=!0);}catch(e){i=!0,l=e}finally{try{n||null==r["return"]||r["return"]()}finally{if(i)throw l}}return a}}function H(e,t){if(e){if("string"==typeof e)return F(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function G(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function U(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function q(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=H(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(t){throw t},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r=!0,d=!1,s;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(t){d=!0,s=t},f:function(){try{r||null==a.return||a.return()}finally{if(d)throw s}}}}function Q(){var e=m().accumulator(function(e){return e&&t.mean(e)}),a=function(t){return e(t)};return xe(a,e,"period","value"),a}function X(){var e=.1,t=u,a=function(a){return a.map(function(a){var n=y(t(a)*(1-e)),i=y(t(a)*(1+e));return{lower:n,upper:i}})};return a.factor=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],a):e},a.value=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],a):t},a}function j(){var e=function(e){return e.close},a=function(e){return e.high},n=function(e){return e.low},i=v().period(13),l=function(l){return i.value(e),t.zip(l,i(l)).map(function(e){var t=y(a(e[0])-e[1]),i=y(n(e[0])-e[1]);return{bullPower:t,bearPower:i}})};return l.closeValue=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},l.highValue=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},l.lowValue=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],l):n},xe(l,i,"period"),l}function Z(){var e={};return e.distance=function(e,t){return t-e},e.offset=function(e,t){return e instanceof Date?new Date(e.getTime()+t):e+t},e.clampUp=function(e){return e},e.clampDown=function(e){return e},e.copy=function(){return e},e}function K(e,t){var a=e.map(t.clampUp);return a.length!==new Set(a.map(function(e){return null===e||void 0===e?void 0:e.valueOf()})).size&&console.warn("There are multiple ticks that fall within a discontinuity, which has led to them being rendered on top of each other. Consider using scale.ticks to explicitly specify the ticks for the scale."),a}function J(e){var t=this;arguments.length||(e=a.scaleIdentity());var n=Z(),i=function(t){var a=e.domain(),i=e.range(),l=n.distance(a[0],a[1]),r=n.distance(a[0],t),o=r/l*(i[1]-i[0])+i[0];return o};return i.invert=function(t){var a=e.domain(),i=e.range(),l=(t-i[0])/(i[1]-i[0]),r=n.distance(a[0],a[1]);return n.offset(a[0],l*r)},i.domain=function(){if(!arguments.length)return e.domain();var t=0>=arguments.length?void 0:arguments[0],a=n.clampUp(t[0]),l=n.clampDown(t[1]);return e.domain([a,l]),i},i.nice=function(){e.nice();var t=e.domain(),a=n.clampUp(t[0]),l=n.clampDown(t[1]);return e.domain([a,l]),i},i.ticks=function(){for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];var r=e.ticks.apply(t,i);return K(r,n)},i.copy=function(){return J(e.copy()).discontinuityProvider(n.copy())},i.discontinuityProvider=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],i):n},we(i,e,Ce("range","rangeRound","interpolate","clamp","tickFormat")),i}function $(){var e=[function(e){return e}],a=[0,0],n="percent",l=null,r=[],o=function(o){var d=Array(o.length),s=q(e),c;try{for(s.s();!(c=s.n()).done;)for(var h=c.value,g=0,u;g<o.length;g++)u=h(o[g],g),Array.isArray(u)?d.push.apply(d,Y(u)):d.push(u)}catch(e){s.e(e)}finally{s.f()}var f=[t.min(d),t.max(d)];if(f[0]=null==f[0]?t.min(r):t.min([f[0]].concat(Y(r))),f[1]=null==f[1]?t.max(r):t.max([f[1]].concat(Y(r))),null!=l){var p=me(be(f[1]-l),be(f[0]-l));f[0]=l-p,f[1]=l+p}switch(n){case"domain":{f[0]-=a[0],f[1]+=a[1];break}case"percent":{var y=f[1]-f[0];f[0]-=a[0]*y,f[1]+=a[1]*y;break}default:throw new Error("Unknown padUnit: ".concat(n));}return f};return o.accessors=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],o):e},o.pad=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],o):a},o.padUnit=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],o):n},o.include=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],o):r},o.symmetricalAbout=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],o):l},o}function ee(){var e=[],t=[0,0],a="percent",n=null,i=[],l=$(),r=function(e){return null==e?null:e.valueOf()},o=function(o){var d=e.map(function(e){return function(){var t=e.apply(void 0,arguments);return Array.isArray(t)?t.map(r):r(t)}});return l.accessors(d).pad(t).padUnit(a).symmetricalAbout(null==n?null:n.valueOf()).include(i.map(function(e){return e.valueOf()})),l(o).map(function(e){return new Date(e)})};return o.accessors=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],o):e},o.pad=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],o):t},o.padUnit=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],o):a},o.include=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],o):i},o.symmetricalAbout=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],o):n},o}function te(){var e=1,t=20,a=.1,n=.1,l=i.randomNormal(),r=function(){for(var r=Math.sqrt,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,d=e/t,s=[],c=0;c<t+1;c++){s.push(o);var h=l()*r(d)*n+(a-n*n/2)*d;o*=ye(h)}return s};return r.period=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],r):e},r.steps=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.mu=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},r.sigma=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},r.random=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],r):l},r}function ae(e){return"function"==typeof e?e:function(){return e}}function ne(){var e=new Date,t=100,a=n.timeDay,l=1,r=n.timeYear,o=1,d=null,s=function(){var e=i.randomNormal(1,.1);return pe(1e3*e())},c=te(),h=function(e){var t=r.offset(e,o)-e;return(a.offset(e,l)-e)/t},g=function(e,t){var a=h(e),n=c.period(a)(t),i={date:e,open:n[0],high:me.apply(Math,n),low:fe.apply(Math,n),close:n[c.steps()]};return i.volume=s(i),i},u=function(n){var i,r,o;do i=n?a.offset(n.date,l):new Date(e.getTime()),r=n?n.close:t,n=g(i,r),o=d&&!d(n);while(o);return n},f=function(){var e={},t;return e.next=function(){var e=u(t);return t=e,e},e.take=function(t){return e.until(function(e,a){return!t||0>t||a===t})},e.until=function(e){for(var a=[],n=0,i=u(t),l=e&&!e(i,n);l;)a.push(i),t=i,i=u(t),n+=1,l=e&&!e(i,n);return a},e},p=function(e){return f().take(e)};if(p.stream=f,"function"!=typeof Symbol||"symbol"!==S(Symbol.iterator))throw new Error("d3fc-random-data depends on Symbol. Make sure that you load a polyfill in older browsers. See README.");return p[Symbol.iterator]=function(){var e=f();return{next:function(){return{value:e.next(),done:!1}}}},p.startDate=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],p):e},p.startPrice=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],p):t},p.interval=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],p):a},p.intervalStep=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],p):l},p.unitInterval=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],p):r},p.unitIntervalStep=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],p):o},p.filter=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],p):d},p.volume=function(){return arguments.length?(s=ae(0>=arguments.length?void 0:arguments[0]),p):s},we(p,c),p}function ie(){var e="BTC-USD",t=null,a=null,n=null,i=function(){var i=[];null!=t&&i.push("start="+t.toISOString()),null!=a&&i.push("end="+a.toISOString()),null!=n&&i.push("granularity="+n);var r="https://api.gdax.com/products/"+e+"/candles?"+i.join("&");return l.json(r).then(function(e){return e.map(function(e){return{date:new Date(1e3*e[0]),open:e[3],high:e[2],low:e[1],close:e[4],volume:e[5]}})})};return i.product=function(t){return arguments.length?(e=t,i):e},i.start=function(e){return arguments.length?(t=e,i):t},i.end=function(e){return arguments.length?(a=e,i):a},i.granularity=function(e){return arguments.length?(n=e,i):n},i}function le(){var e=10,a=function(a){return 1>=e?a.map(function(e){return[e]}):t.range(0,pe(a.length/e)).map(function(t){return a.slice(t*e,(t+1)*e)})};return a.bucketSize=function(t){return arguments.length?(e=t,a):e},a}function re(){function e(e){var a=e.map(function(e){return[n(e),i(e)]}),l=t.range(1,a.length-1).map(function(e){var t=a[e-1],n=a[e],i=a[e+1];return .5*be((t[0]-i[0])*(n[1]-t[1])-(t[0]-n[0])*(i[1]-t[1]))});return l}var a=le(),n=function(e){return e},i=function(e){return e},l=function(n){if(a.bucketSize()>=n.length)return n;var i=e(n),l=a(i),r=a(n.slice(1,n.length-1)),o=r.map(function(e,a){var n=l[a],i=t.max(n),r=n.indexOf(i);return e[r]});return[].concat([n[0]],o,[n[n.length-1]])};return xe(l,a,"bucketSize"),l.x=function(e){return arguments.length?(n=e,l):n},l.y=function(e){return arguments.length?(i=e,l):i},l}function oe(){var e=function(e){return e},a=function(e){return e},n=le(),i=function(i){if(n.bucketSize()>=i.length)return i;var l=n(i.slice(1,i.length-1)),r=i[0],o=i[i.length-1],d=[].concat([r],l,[o]),s=e(r),c=a(r),h=l.map(function(n,l){var i=t.mean(d[l+1],e),r=t.mean(d[l+1],a),o=n.map(function(t){return[e(t),a(t)]}),h=o.map(function(e){return .5*be((s-i)*(e[1]-c)-(s-e[0])*(r-c))}),g=h.indexOf(t.max(h)),u=o[g];return s=u[0],c=u[1],n[g]});return[].concat([i[0]],h,[i[i.length-1]])};return xe(i,n,"bucketSize"),i.x=function(t){return arguments.length?(e=t,i):e},i.y=function(e){return arguments.length?(a=e,i):a},i}function de(){var e=le(),a=function(e){return e},n=function(n){if(e.bucketSize()>n.length)return n;var i=t.extent(n,a),l=e(n.slice(1,n.length-1)),r=l.map(function(e){var t={},n=!0,l=e.map(a),r=l.filter(function(e){return e===i[0]||e===i[1]}).map(function(e){return l.indexOf(e)})[0],o,d;return void 0===r?(l.forEach(function(e,a){void 0===t[e]&&(t[e]=0),t[e]++,t[e]>t[o]||void 0===o?(o=e,d=a,n=!0):t[e]===t[o]&&(n=!1)}),n?e[d]:e[ue(e.length/2)]):e[r]});return[].concat([n[0]],r,[n[n.length-1]])};return xe(n,e,"bucketSize"),n.value=function(e){return arguments.length?(a=e,n):a},n}function se(){var e=arguments;return function(t,a){for(var n=0,i=e.length;n<i;n++)if(null==e[n](t,a))return!1;return!0}}function ce(e){switch(e){case Ft.BYTE:case Ft.UNSIGNED_BYTE:return 1;case Ft.SHORT:case Ft.UNSIGNED_SHORT:return 2;case Ft.FLOAT:return 4;default:throw new Error("Unknown type ".concat(e));}}function he(e){switch(e){case Ft.BYTE:return Int8Array;case Ft.UNSIGNED_BYTE:return Uint8Array;case Ft.SHORT:return Int16Array;case Ft.UNSIGNED_SHORT:return Uint16Array;case Ft.FLOAT:return Float32Array;default:throw new Error("Unknown type ".concat(e));}}var ve=function(e,t,a){var n=t[a];if("function"!=typeof n)throw new Error("Attempt to rebind ".concat(a," which isn't a function on the source object"));return function(){for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];var r=n.apply(t,i);return r===t?e:r}},xe=function(e,t){for(var a=arguments.length,n=Array(2<a?a-2:0),i=2;i<a;i++)n[i-2]=arguments[i];for(var l=0,r=n,o;l<r.length;l++)o=r[l],e[o]=ve(e,t,o);return e},Se=function(e){return function(t){return e.reduce(function(e,t){return e&&t(e)},t)}},we=function(e,t){for(var a=arguments.length,n=Array(2<a?a-2:0),i=2;i<a;i++)n[i-2]=arguments[i];for(var l=Se(n),r=0,o=Object.keys(t);r<o.length;r++){var d=o[r],s=l(d);s&&(e[s]=ve(e,t,d))}return e},Ve=function(e){return e.map(function(e){return"string"==typeof e?new RegExp("^".concat(e,"$")):e})},ke=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t=Ve(t),function(e){return t.every(function(t){return!t.test(e)})&&e}},Ce=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t=Ve(t),function(e){return t.some(function(t){return t.test(e)})&&e}},Ae=function(e){return function(t){return e[t]}},_e=function(e){return e[0].toUpperCase()+e.slice(1)},Ee=function(e){return function(t){return e+_e(t)}},De=function(e,t,a,n){var i={sunday:0,monday:1,saturday:6},l=86400000,r=5*l,o={},d=function(t){return 0===e(t)||6===e(t)};return o.clampDown=function(a){if(a&&d(a)){var n=t.ceil(a);return e(n)===i.sunday?t.offset(n,-1):e(n)===i.monday?t.offset(n,-2):n}return a},o.clampUp=function(a){if(a&&d(a)){var n=t.floor(a);return e(n)===i.saturday?t.offset(n,2):e(n)===i.sunday?t.offset(n,1):n}return a},o.distance=function(e,t){e=o.clampUp(e),t=o.clampDown(t);var n=a.ceil(e);if(t<n)return t.getTime()-e.getTime();var i=n.getTime()-e.getTime(),d=a.ceil(t),s=d.getTime()-t.getTime(),c=ge((d.getTime()-n.getTime())/(7*l));return c*r+i-s},o.offset=function(e,i){var l=d(e)?o.clampUp(e):e;if(0===i)return l;var s=0>i,c=i,h=s?n.floor(l):a.ceil(l);if(c-=h.getTime()-l.getTime(),s&&0<c||0<i&&0>c)return new Date(l.getTime()+i);l=s?h:t.offset(h,2);var g=ue(c/r);return l=t.offset(l,7*g),c-=g*r,l=new Date(l.getTime()+c),l},o.copy=function(){return o},o},ze=function(e){return"function"==typeof e?e:function(){return e}},Ie=function(){var e=null,t=function(e){return e.date},a=function(e){return e.open},n=function(e){return e.high},l=function(e){return e.low},o=function(e){return e.close},s="vertical",c=ze(3),h=function(i){var h=e||r.path();return i.forEach(function(e,r){var i=t(e,r),d=a(e,r),g=n(e,r),u=l(e,r),f=o(e,r),p=c(e,r)/2;"vertical"===s?(h.moveTo(i,u),h.lineTo(i,g),h.moveTo(i,d),h.lineTo(i-p,d),h.moveTo(i,f),h.lineTo(i+p,f)):(h.moveTo(u,i),h.lineTo(g,i),h.moveTo(d,i),h.lineTo(d,i+p),h.moveTo(f,i),h.lineTo(f,i-p))}),e?null:h.toString()};return h.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],h):e},h.x=function(){return arguments.length?(t=ze(0>=arguments.length?void 0:arguments[0]),h):t},h.open=function(){return arguments.length?(a=ze(0>=arguments.length?void 0:arguments[0]),h):a},h.high=function(){return arguments.length?(n=ze(0>=arguments.length?void 0:arguments[0]),h):n},h.low=function(){return arguments.length?(l=ze(0>=arguments.length?void 0:arguments[0]),h):l},h.close=function(){return arguments.length?(o=ze(0>=arguments.length?void 0:arguments[0]),h):o},h.width=function(){return arguments.length?(c=ze(0>=arguments.length?void 0:arguments[0]),h):c},h.orient=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],h):s},h},Ne=function(){var e=null,t=function(e){return e.x},a=function(e){return e.y},n="center",i="center",l=function(e){return e.height},o=ze(3),d=function(d,s){var c=e||r.path();return d.forEach(function(e,r){var d=t.call(this,e,s||r),h=a.call(this,e,s||r),g=l.call(this,e,s||r),u=o.call(this,e,s||r),f;switch(n){case"left":f=u;break;case"right":f=0;break;case"center":f=u/2;break;default:throw new Error("Invalid horizontal alignment "+n);}var p;switch(i){case"bottom":p=-g;break;case"top":p=0;break;case"center":p=g/2;break;default:throw new Error("Invalid vertical alignment "+i);}c.rect(d-f,h-p,u,g)},this),e?null:c.toString()};return d.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],d):e},d.x=function(){return arguments.length?(t=ze(0>=arguments.length?void 0:arguments[0]),d):t},d.y=function(){return arguments.length?(a=ze(0>=arguments.length?void 0:arguments[0]),d):a},d.width=function(){return arguments.length?(o=ze(0>=arguments.length?void 0:arguments[0]),d):o},d.horizontalAlign=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],d):n},d.height=function(){return arguments.length?(l=ze(0>=arguments.length?void 0:arguments[0]),d):l},d.verticalAlign=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],d):i},d},Pe=function(){var e=null,t=function(e){return e.date},a=function(e){return e.open},n=function(e){return e.high},l=function(e){return e.low},o=function(e){return e.close},s=ze(3),c=function(i){var c=e||r.path();return i.forEach(function(e,r){var i=t(e,r),d=a(e,r),h=n(e,r),g=l(e,r),u=o(e,r),f=s(e,r);c.rect(i-f/2,d,f,u-d),c.moveTo(i,fe(u,d)),c.lineTo(i,h),c.moveTo(i,me(u,d)),c.lineTo(i,g)}),e?null:c.toString()};return c.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],c):e},c.x=function(){return arguments.length?(t=ze(0>=arguments.length?void 0:arguments[0]),c):t},c.open=function(){return arguments.length?(a=ze(0>=arguments.length?void 0:arguments[0]),c):a},c.high=function(){return arguments.length?(n=ze(0>=arguments.length?void 0:arguments[0]),c):n},c.low=function(){return arguments.length?(l=ze(0>=arguments.length?void 0:arguments[0]),c):l},c.close=function(){return arguments.length?(o=ze(0>=arguments.length?void 0:arguments[0]),c):o},c.width=function(){return arguments.length?(s=ze(0>=arguments.length?void 0:arguments[0]),c):s},c},Te=function(){var e=null,t=function(e){return e.value},a=function(e){return e.median},n=function(e){return e.upperQuartile},l=function(e){return e.lowerQuartile},o=function(e){return e.high},s=function(e){return e.low},c="vertical",h=ze(5),g=ze(.5),u=function(i){var u=e||r.path();return i.forEach(function(e,r){var i=t(e,r),d=h(e,r),f=d/2,p=d*g(e,r),y=p/2,m=o(e,r),b=n(e,r),v=a(e,r),x=l(e,r),S=s(e,r),w=x-b;"vertical"===c?(u.moveTo(i-y,m),u.lineTo(i+y,m),u.moveTo(i,m),u.lineTo(i,b),u.rect(i-f,b,d,w),u.moveTo(i-f,v),u.lineTo(i+f,v),u.moveTo(i,x),u.lineTo(i,S),u.moveTo(i-y,S),u.lineTo(i+y,S)):(u.moveTo(S,i-y),u.lineTo(S,i+y),u.moveTo(S,i),u.lineTo(x,i),u.rect(x,i-f,-w,d),u.moveTo(v,i-f),u.lineTo(v,i+f),u.moveTo(b,i),u.lineTo(m,i),u.moveTo(m,i-y),u.lineTo(m,i+y))}),e?null:u.toString()};return u.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],u):e},u.value=function(){return arguments.length?(t=ze(0>=arguments.length?void 0:arguments[0]),u):t},u.median=function(){return arguments.length?(a=ze(0>=arguments.length?void 0:arguments[0]),u):a},u.upperQuartile=function(){return arguments.length?(n=ze(0>=arguments.length?void 0:arguments[0]),u):n},u.lowerQuartile=function(){return arguments.length?(l=ze(0>=arguments.length?void 0:arguments[0]),u):l},u.high=function(){return arguments.length?(o=ze(0>=arguments.length?void 0:arguments[0]),u):o},u.low=function(){return arguments.length?(s=ze(0>=arguments.length?void 0:arguments[0]),u):s},u.width=function(){return arguments.length?(h=ze(0>=arguments.length?void 0:arguments[0]),u):h},u.orient=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],u):c},u.cap=function(){return arguments.length?(g=ze(0>=arguments.length?void 0:arguments[0]),u):g},u},Be=function(){var e=null,t=function(e){return e.x},a=function(e){return e.high},n=function(e){return e.low},l="vertical",o=ze(5),d=function(i){var s=e||r.path();return i.forEach(function(e,r){var i=t(e,r),d=o(e,r),c=d/2,h=a(e,r),g=n(e,r);"vertical"===l?(s.moveTo(i-c,h),s.lineTo(i+c,h),s.moveTo(i,h),s.lineTo(i,g),s.moveTo(i-c,g),s.lineTo(i+c,g)):(s.moveTo(g,i-c),s.lineTo(g,i+c),s.moveTo(g,i),s.lineTo(h,i),s.moveTo(h,i-c),s.lineTo(h,i+c))}),e?null:s.toString()};return d.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],d):e},d.value=function(){return arguments.length?(t=ze(0>=arguments.length?void 0:arguments[0]),d):t},d.high=function(){return arguments.length?(a=ze(0>=arguments.length?void 0:arguments[0]),d):a},d.low=function(){return arguments.length?(n=ze(0>=arguments.length?void 0:arguments[0]),d):n},d.width=function(){return arguments.length?(o=ze(0>=arguments.length?void 0:arguments[0]),d):o},d.orient=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],d):l},d},Re=function(e){return"function"==typeof e?e:function(){return e}},Ye=1e-6,Le=function(e){return e.selection()!==e},Me=function(e,t){e=e||"g";var a=function(e,t){return t},n=null,i=function(i,l){l=l||function(e){return e};var r=i.selection(),o=Le(i)?i:null,d=r.selectChildren(null==t?e:"".concat(e,".").concat(t)),s=d.data(l,a),c=s.enter().append(e).attr("class",t),h=s.exit();s=s.merge(c);var g=o||n;return g&&(s=s.transition(g).style("opacity",1),c.style("opacity",Ye),h=h.transition(g).style("opacity",Ye)),h.remove(),s.enter=function(){return c},s.exit=function(){return h},s};return i.element=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],i):e},i.className=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],i):t},i.key=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],i):a},i.transition=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],i):n},i},We=function(e,t){return!(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y)},Oe=function(e,t){if(We(e,t)){var a=me(e.x,t.x),n=fe(e.x+e.width,t.x+t.width),i=me(e.y,t.y),l=fe(e.y+e.height,t.y+t.height);return(n-a)*(l-i)}return 0},He=function(e,a){return t.sum(e.map(function(t,n){return a===n?0:Oe(e[a],t)}))},Fe=function(e,t,a,n,i){return{x:e,y:t,width:a,height:n,location:i}},Ge=function(e){var t=e.x,a=e.y,n=e.width,i=e.height;return[Fe(t,a,n,i,"bottom-right"),Fe(t-n,a,n,i,"bottom-left"),Fe(t-n,a-i,n,i,"top-left"),Fe(t,a-i,n,i,"top-right"),Fe(t,a-i/2,n,i,"middle-right"),Fe(t-n/2,a,n,i,"bottom-center"),Fe(t-n,a-i/2,n,i,"middle-left"),Fe(t-n/2,a-i,n,i,"top-center")]},Ue=function(e,t,a){return[].concat(Y(e.slice(0,t)),[a],Y(e.slice(t+1)))},qe=function(e,t){return e<t},Qe=function e(){var a=null,n=qe,l=function(){return 0},r=function(e,t){return a-l(d[t],t,d)+l(e,t,Ue(d,t,e))},o=function i(o,s){a||(a=t.sum(d.map(function(e,t){return l(e,t,d)})));var c=r(o,s);return n(c,a)?e().locationScore(l).winningScore(n).score(c).rectangles(Ue(d,s,o)):i},d;return o.rectangles=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],o):d},o.score=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],o):a},o.winningScore=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],o):n},o.locationScore=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],o):l},o},Xe=function(e){return e[je(e)]},je=function(e){return ue(Math.random()*e.length)},Ze=function(e,a){return e[t.scan(e,a)]},Ke=function(e){return"function"==typeof e?e:function(){return e}},Je=function(e,t){return"left"===e?t/2:"right"===e?-t/2:0},$e=function(e){var t=Object.assign({},e),a=function(){};return Object.keys(t).forEach(function(e){a[e]=function(){return arguments.length?(t[e]=0>=arguments.length?void 0:arguments[0],a):t[e]}}),a},et=function(){var e=function(){return 0},t=function(e){return e.x},n=function(e){return e.y},l="center",r=function(){return 5},o="vertical",s=$e({decorate:function(){},defined:function(a,l){return se(e,t,n)(a,l)},xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return s.values=function(a,d){var i=r(a,d),c=Je(l,i),h=s.xScale(),g=s.yScale();if("vertical"===o){var u=g(n(a,d),d),f=g(e(a,d),d),p=h(t(a,d),d)+c;return{d:a,x:p,y:u,y0:f,width:i,height:u-f,origin:[p,u],baseOrigin:[p,f],transposedX:p,transposedY:u}}var y=h(n(a,d),d),m=h(e(a,d),d),b=g(t(a,d),d)+c;return{d:a,x:b,y:y,y0:m,width:i,height:y-m,origin:[y,b],baseOrigin:[m,b],transposedX:y,transposedY:b}},s.xValues=function(){return"vertical"===o?[t]:[e,n]},s.yValues=function(){return"vertical"===o?[e,n]:[t]},s.baseValue=function(){return arguments.length?(e=Ke(0>=arguments.length?void 0:arguments[0]),s):e},s.crossValue=function(){return arguments.length?(t=Ke(0>=arguments.length?void 0:arguments[0]),s):t},s.mainValue=function(){return arguments.length?(n=Ke(0>=arguments.length?void 0:arguments[0]),s):n},s.bandwidth=function(){return arguments.length?(r=Ke(0>=arguments.length?void 0:arguments[0]),s):r},s.align=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],s):l},s.orient=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],s):o},s},tt={red:"#c60",green:"#6c0",black:"#000",gray:"#ddd",darkGray:"#999"},at=function(){var e=et(),t=d.line().x(function(t,a){return e.values(t,a).transposedX}).y(function(t,a){return e.values(t,a).transposedY}),a=Me("path","line"),n=function(n){Le(n)&&a.transition(n),t.defined(e.defined()),n.each(function(n,i,l){var r=a(o.select(l[i]),[n]);r.enter().attr("fill","none").attr("stroke",tt.black),r.attr("d",t),e.decorate()(r,n,i)})};return we(n,e,ke("baseValue","bandwidth","align")),xe(n,a,"key"),xe(n,t,"curve"),n},nt=function(){var e=et(),t=d.line().x(function(t,a){return e.values(t,a).transposedX}).y(function(t,a){return e.values(t,a).transposedY}),a=function(a){var n=t.context();n.beginPath(),n.strokeStyle=tt.black,n.fillStyle="transparent",e.decorate()(n,a),t.defined(e.defined())(a),n.fill(),n.stroke(),n.closePath()};return we(a,e,ke("baseValue","bandwidth","align")),xe(a,t,"curve","context"),a},it=function(){var e=[0,1],t=[-1,1],a=function(){};return a.domain=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],a):e},a.range=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],a):t},a},lt=function(){var e={},t={},a=null,n=function(n,i){var l=n.context();Object.keys(e).forEach(function(t){var a=e[t];if("function"!=typeof a)throw new Error("Expected an attribute for ".concat(t,", found ").concat(a));var r=l.getAttribLocation(i,t);a.location(r)(n)}),Object.keys(t).forEach(function(e){var a=t[e];if("function"!=typeof a)throw new Error("Expected a uniform for ".concat(e,", found ").concat(a));var r=l.getUniformLocation(i,e);a.location(r)(n)}),null!==a&&a(n)};return n.flush=function(){Object.values(e).forEach(function(e){return e.clear()}),Object.values(t).forEach(function(e){return e.clear()}),null!==a&&a.clear()},n.attribute=function(){for(var t=arguments.length,a=Array(t),i=0;i<t;i++)a[i]=arguments[i];return 1===a.length?e[a[0]]:(e[a[0]]=a[1],n)},n.uniform=function(){for(var e=arguments.length,a=Array(e),i=0;i<e;i++)a[i]=arguments[i];return 1===a.length?t[a[0]]:(t[a[0]]=a[1],n)},n.elementIndices=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],n):a},n},rt=function(e){var t=-1,a=e,n=!0,i=function(e){if(n){var i=e.context();if(Array.isArray(a))switch(a.length){case 1:i.uniform1fv(t,a);break;case 2:i.uniform2fv(t,a);break;case 3:i.uniform3fv(t,a);break;case 4:i.uniform4fv(t,a);break;default:throw new Error("Uniform supports up to 4 elements. ".concat(a.length," provided."));}else i.uniform1f(t,a);n=!1}};return i.clear=function(){n=!0},i.location=function(){return arguments.length?(t!==(0>=arguments.length?void 0:arguments[0])&&(t=0>=arguments.length?void 0:arguments[0],n=!0),i):t},i.data=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],n=!0,i):a},i},ot={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},dt=function(){function e(e,t,a){return!e||f||t!==o||a!==d}function t(e,t){var i=a(e,n.VERTEX_SHADER),l=a(t,n.FRAGMENT_SHADER),r=n.createProgram();if(n.attachShader(r,i),n.attachShader(r,l),n.linkProgram(r),g&&!n.getProgramParameter(r,n.LINK_STATUS)){var o=n.getProgramInfoLog(r);throw n.deleteProgram(r),new Error("Failed to link program : ".concat(o,"\n            Vertex Shader : ").concat(e,"\n            Fragment Shader : ").concat(t))}return r}function a(e,t){var a=n.createShader(t);if(n.shaderSource(a,e),n.compileShader(a),g&&!n.getShaderParameter(a,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(a);throw n.deleteShader(a),new Error("Failed to compile shader : ".concat(i,"\n            Shader : ").concat(e))}return a}var n=null,i=null,l=null,r=null,o=null,d=null,s=ot.TRIANGLES,c=0,h=lt(),g=!1,u=null,f=!0,p=1,y=function a(g){if(null!=n){var y=l(),m=r();if(e(i,y,m)&&(i=t(y,m),o=y,d=m,f=!1),n.useProgram(i),h.uniform("uScreen",rt([n.canvas.width/p,n.canvas.height/p])),h(a,i),0===c)null==h.elementIndices()?n.drawArrays(s,0,g):n.drawElements(s,g,n.UNSIGNED_SHORT,0);else if(null==h.elementIndices())u.drawArraysInstancedANGLE(s,0,c,g);else{var b=h.elementIndices().data().length;if(c!==b)throw new Error("Expected elementIndices length ".concat(b)+" to match subInstanceCount ".concat(c,"."));u.drawElementsInstancedANGLE(s,c,n.UNSIGNED_SHORT,0,g)}}};return y.extInstancedArrays=function(){return u},y.context=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.length?((null==t[0]||t[0]!==n)&&(h.flush(),f=!0),null!=t[0]&&t[0]!==n&&(u=t[0].getExtension("ANGLE_instanced_arrays")),n=t[0],y):n},y.buffers=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],y):h},y.vertexShader=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],y):l},y.fragmentShader=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],y):r},y.mode=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],y):s},y.subInstanceCount=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],y):c},y.debug=function(){return arguments.length?(g=0>=arguments.length?void 0:arguments[0],y):g},y.pixelRatio=function(){return arguments.length?(p=0>=arguments.length?void 0:arguments[0],y):p},y},st=function(e){function t(e,t){e.push(t)}function a(e,t,a){var n=e.indexOf(a);e.splice(0<=n?n:e.length,0,t)}function n(e,t){var a=e.indexOf(t);-1===a&&e.push(t)}var i=[],l=[],r=function(){return e(i.join("\n"),l.join("\n"))};return r.appendHeader=function(e){return t(i,e),r},r.insertHeader=function(e,t){return a(i,e,t),r},r.appendHeaderIfNotExists=function(e){return n(i,e),r},r.appendBody=function(e){return t(l,e),r},r.insertBody=function(e,t){return a(l,e,t),r},r.appendBodyIfNotExists=function(e){return n(l,e),r},r},ct=function(e,t){return"\nprecision mediump float;\nfloat inf = 1.0 / 0.0;\n".concat(e,"\nvoid main() {\n    ").concat(t,"\n}")},ht=function(e,t){return"\nprecision mediump float;\n".concat(e,"\nvoid main() {\n    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n    ").concat(t,"\n}")},gt={header:"attribute vec4 aFillColor;\n             varying vec4 vFillColor;",body:"vFillColor = aFillColor;"},ut={header:"attribute vec4 aStrokeColor;\n             varying vec4 vStrokeColor;",body:"vStrokeColor = aStrokeColor;"},ft={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = 2.0 * sqrt(aSize / 3.14159);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},pt={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = 4.0 * sqrt(aSize / 3.14159);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},yt={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = 3.0 * sqrt(aSize / 3.14159);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},mt={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = sqrt(aSize);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},bt={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = sqrt(aSize);\n        gl_PointSize = 2.0 * (vSize + uStrokeWidth + 1.0);\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},vt={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = sqrt((16.0 * aSize) / (3.0 * sqrt(3.0)));\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},xt={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vStrokeWidthRatio;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = 3.0 * sqrt(aSize / 5.0);\n        vStrokeWidthRatio = uStrokeWidth / (vSize + uStrokeWidth + 1.0);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},St={header:"\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aHighValue;\n        attribute float aOpenValue;\n        attribute float aCloseValue;\n        attribute float aLowValue;\n        attribute vec3 aCorner;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vColorIndicator;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vColorIndicator = sign(aCloseValue - aOpenValue);\n\n        float isPositiveY = (sign(aCorner.y) + 1.0) / 2.0;\n        float isNotPositiveY = 1.0 - isPositiveY;\n        float isExtremeY = abs(aCorner.y) - 1.0;\n        float isNotExtremeY = 1.0 - isExtremeY;\n        float yValue =\n         (isPositiveY * isExtremeY * aLowValue) +\n         (isPositiveY * isNotExtremeY * aCloseValue) +\n         (isNotPositiveY * isNotExtremeY * aOpenValue) +\n         (isNotPositiveY * isExtremeY * aHighValue);\n\n        float lineWidthXDirection = (isNotExtremeY * aCorner.x) + (isExtremeY * aCorner.z);\n        float lineWidthYDirection = isNotExtremeY * sign(aCloseValue - aOpenValue) * aCorner.y;\n\n        float bandwidthModifier = aBandwidth * aCorner.x / 2.0;\n\n        float xModifier = (uStrokeWidth * lineWidthXDirection / 2.0) + bandwidthModifier;\n        float yModifier = uStrokeWidth * lineWidthYDirection / 2.0;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);"},wt={header:"\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aHighValue;\n        attribute float aOpenValue;\n        attribute float aCloseValue;\n        attribute float aLowValue;\n        attribute vec3 aCorner;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vColorIndicator;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vColorIndicator = sign(aCloseValue - aOpenValue);\n\n        float isPositiveY = (sign(aCorner.y) + 1.0) / 2.0;\n        float isNotPositiveY = 1.0 - isPositiveY;\n        float isExtremeY = abs(aCorner.y) - 1.0;\n        float isNotExtremeY = 1.0 - isExtremeY;\n        float yValue =\n            (isPositiveY * isExtremeY * aLowValue) +\n            (isPositiveY * isNotExtremeY * aCloseValue) +\n            (isNotPositiveY * isNotExtremeY * aOpenValue) +\n            (isNotPositiveY * isExtremeY * aHighValue);\n\n        float lineWidthXDirection = isExtremeY * aCorner.z;\n        float lineWidthYDirection = isNotExtremeY * aCorner.z;\n\n        float bandwidthModifier = isNotExtremeY * aCorner.x * aBandwidth / 2.0;\n\n        float xModifier = (uStrokeWidth * lineWidthXDirection / 2.0) + bandwidthModifier;\n        float yModifier = uStrokeWidth * lineWidthYDirection / 2.0;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);"},Vt={header:"\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aMainValue;\n        attribute float aBaseValue;\n        attribute vec2 aCorner;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        float isBaseline = (1.0 - aCorner.y) / 2.0;\n        float yValue = (isBaseline * aBaseValue) + ((1.0 - isBaseline) * aMainValue);\n\n        float xModifier = aCorner.x * (aBandwidth) / 2.0;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);"},kt={header:"\n        attribute vec3 aCorner;\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aHighValue;\n        attribute float aLowValue;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        float isLow = (aCorner.y + 1.0) / 2.0;\n        float yValue = isLow * aLowValue + (1.0 - isLow) * aHighValue;\n\n        float isEdgeCorner = abs(aCorner.x);\n        float lineWidthXDirection = (1.0 - isEdgeCorner) * aCorner.z;\n        float lineWidthYDirection = isEdgeCorner * aCorner.z;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);\n\n        float xModifier = (uStrokeWidth * lineWidthXDirection) + (aBandwidth * aCorner.x / 2.0);\n        float yModifier = (uStrokeWidth * lineWidthYDirection);"},Ct={header:"\n        attribute vec3 aCorner;\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aCrossNextValue;\n        attribute float aMainNextValue;\n        attribute float aBaseValue;\n        attribute float aBaseNextValue;\n        attribute float aDefined;\n        attribute float aDefinedNext;\n\n        varying float vDefined;\n\n        float when_lt(float a, float b) {\n            return max(sign(b - a), 0.0);\n        }\n\n        float and(float a, float b) {\n            return a * b;\n        }",body:"\n        vDefined = aDefined * aDefinedNext;\n        gl_Position = vec4(0, 0, 0, 1);\n\n        float hasIntercepted = when_lt((aMainNextValue - aBaseNextValue) * (aMainValue - aBaseValue), 0.0);\n        float useIntercept = and(aCorner.z, hasIntercepted);\n\n        float yGradient = (aMainNextValue - aMainValue) / (aCrossNextValue - aCrossValue);\n        float yConstant = aMainNextValue - (yGradient * aCrossNextValue);\n\n        float y0Gradient = (aBaseNextValue - aBaseValue) / (aCrossNextValue - aCrossValue);\n        float y0Constant = aBaseNextValue - (y0Gradient * aCrossNextValue);\n\n        float denominator = (yGradient - y0Gradient) + step(abs(yGradient - y0Gradient), 0.0);\n        float interceptXValue = (y0Constant - yConstant) / denominator;\n        float interceptYValue = (yGradient * interceptXValue) + yConstant;\n\n        gl_Position = vec4(interceptXValue * useIntercept, interceptYValue * useIntercept, 0, 1);\n\n        gl_Position.x += (1.0 - useIntercept) * ((aCorner.x * aCrossNextValue) + ((1.0 - aCorner.x) * aCrossValue));\n        gl_Position.y += (1.0 - useIntercept) * (1.0 - aCorner.y) * ((aCorner.x * aMainNextValue) + ((1.0 - aCorner.x) * aMainValue));\n        gl_Position.y += (1.0 - useIntercept) * aCorner.y * ((aCorner.x * aBaseNextValue) + ((1.0 - aCorner.x) * aBaseValue));"},At={header:"\n        attribute vec4 aCorner;\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aCapWidth;\n        attribute float aHighValue;\n        attribute float aUpperQuartileValue;\n        attribute float aMedianValue;\n        attribute float aLowerQuartileValue;\n        attribute float aLowValue;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vDefined;\n    ",body:"\n        vDefined = aDefined;\n        float isExtremeY = sign(abs(aCorner.y) - 2.0) + 1.0;\n        float isNotExtremeY = 1.0 - isExtremeY;\n\n        float isNonZeroY = abs(sign(aCorner.y));\n        float isZeroY = 1.0 - isNonZeroY;\n\n        float isQuartileY = isNotExtremeY * isNonZeroY;\n\n        float isPositiveY = (sign(aCorner.y + 0.5) + 1.0) / 2.0;\n        float isNegativeY = 1.0 - isPositiveY;\n\n        float yValue =\n          (isExtremeY * isNegativeY) * aHighValue +\n          (isQuartileY * isNegativeY) * aUpperQuartileValue +\n          isZeroY * aMedianValue +\n          (isQuartileY * isPositiveY) * aLowerQuartileValue +\n          (isExtremeY * isPositiveY) * aLowValue;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);\n\n        float isHorizontal = aCorner.w;\n        float isVertical = 1.0 - isHorizontal;\n\n        float xDisplacement = aCorner.x * (isExtremeY * aCapWidth + isNotExtremeY * aBandwidth) / 2.0;\n\n        float xModifier = (isVertical * uStrokeWidth * aCorner.z / 2.0) + xDisplacement;\n        float yModifier = isHorizontal * uStrokeWidth * aCorner.z / 2.0;"},_t={header:"\n        varying float vSize;\n        varying float vDefined;",body:"\n        float canFill = 1.0;\n        float distance = length(2.0 * gl_PointCoord - 1.0);\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n            return;\n        }"},Et={header:"\n        varying float vSize;\n        varying float vDefined;\n\n        // anterior, exterior angles\n        float an = 0.628319;\n        vec2 acs = vec2(0.809017, 0.587786); // (cos, sin)\n        float en = 0.952000;\n        vec2 ecs = vec2(0.580055, 0.814577);\n    ",body:"\n        float canFill = 1.0;\n\n        vec2 p = 2.0 * gl_PointCoord - 1.0;\n        p.y *= -1.0;\n\n        // sector\n        float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n        p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n        p -= acs;\n        p += ecs * clamp(-dot(p, ecs), 0.0, acs.y / ecs.y);\n        float d = length(p) * sign(p.x);\n\n        float distance = 1.0 + d;\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n            return;\n        }"},Dt={header:"\n        varying float vSize;\n        varying float vDefined;\n    ",body:"\n        float canFill = 1.0;\n\n        vec2 p = 2.0 * gl_PointCoord - 1.0;\n        p.y *= -1.0;\n\n        // sector\n        float an = 3.141593 / 3.0;\n        float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n        p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n        // box\n        vec2 d = abs(p) - vec2(0.9, 0.35);\n        float sdf = length(max(d, 0.0)) + min(max(d.x, d.y), 0.0);\n\n        float distance = 1.0 + sdf;\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n            return;\n        }"},zt={header:"\n        varying float vSize;\n        varying float vDefined;",body:"\n        float canFill = 1.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n        float distance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);"},It={header:"\n        varying float vSize;\n        varying float vDefined;\n        float a = 0.6;\n        float b = 1.0;\n    ",body:"\n        if (vDefined < 0.5) {\n            discard;\n        }\n\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n\n        float x = abs(pointCoordTransform.x);\n        float y = abs(pointCoordTransform.y);\n\n        float X = (a * b * x) / (a * y + b * x);\n        float Y = (a * b * y) / (a * y + b * x);\n\n        float distance = length(vec2(x, y)) / length(vec2(X, Y));\n\n        if (distance > 1.0) {\n            discard;\n        }\n    "},Nt={header:"\n        varying float vSize;\n        varying float vDefined;",body:"\n        float canFill = 1.0;\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n        float topEdgesDistance = abs(pointCoordTransform.x) - ((pointCoordTransform.y - 0.6) / sqrt(3.0));\n        float bottomEdgeDistance = pointCoordTransform.y + 0.5;\n        float distance = max(topEdgesDistance, bottomEdgeDistance);\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n        }"},Pt={header:"\n        varying float vSize;\n        varying float vStrokeWidthRatio;\n        varying float vDefined;",body:"\n        float canFill = 1.0;\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n        float innerCornerDistance = min(abs(pointCoordTransform.x), abs(pointCoordTransform.y)) + 0.66 - vStrokeWidthRatio;\n        float outerEdgeDistance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));\n        float distance = max(innerCornerDistance, outerEdgeDistance);\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n        }"},Tt={header:"\n        varying float vColorIndicator;\n        varying float vDefined;",body:"\n        float canFill = 1.0;\n        float canStroke = 0.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        gl_FragColor = vec4(0.4, 0.8, 0, 1);\n        if (vColorIndicator < 0.0) {\n            gl_FragColor = vec4(0.8, 0.4, 0, 1);\n        }"},Bt={header:"\n        varying float vColorIndicator;\n        varying float vDefined;",body:"\n        float canFill = 0.0;\n        float canStroke = 1.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        gl_FragColor = vec4(0.4, 0.8, 0, 1);\n        if (vColorIndicator < 0.0) {\n            gl_FragColor = vec4(0.8, 0.4, 0, 1);\n        }"},Rt={header:"\n        varying float vDefined;",body:"\n        float canFill = 1.0;\n        float canStroke = 0.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        gl_FragColor = vec4(0.86, 0.86, 0.86, 1);"},Yt={header:"\n        varying float vDefined;\n    ",body:"\n        float canFill = 0.0;\n        float canStroke = 1.0;\n\n        if (vDefined < 0.5) {\n            discard;\n        }"},Lt={header:"varying float vDefined;",body:"\n        float canFill = 0.0;\n        float canStroke = 1.0;\n        if (vDefined < 0.5) {\n            discard;\n        }"},Mt={header:"varying float vDefined;",body:"\n        float canFill = 1.0;\n        float canStroke = 0.0;\n\n        gl_FragColor = vec4(0.60, 0.60, 0.60, 1.0);\n\n        if (vDefined < 0.5) {\n            discard;\n        }"},Wt={header:"varying vec4 vFillColor;",body:"gl_FragColor = (canFill * vFillColor) + ((1.0 - canFill) * gl_FragColor);"},Ot={header:"varying vec4 vStrokeColor;",body:"gl_FragColor = (canStroke * vStrokeColor) + ((1.0 - canStroke) * gl_FragColor);"},Ht=function(){var e=st(ct),t=st(ht);return e.appendHeader(Ct.header).appendBody(Ct.body),t.appendHeader(Rt.header).appendBody(Rt.body),{vertex:function(){return e},fragment:function(){return t}}},Ft={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,FLOAT:5126},Gt=function(){var e=-1,t=null,a=1,n=Ft.FLOAT,i=!1,l=0,r=0,o=null,d=function(d){var s=d.context();null==t&&(t=s.createBuffer()),s.bindBuffer(s.ARRAY_BUFFER,t),s.vertexAttribPointer(e,a,n,i,l,r),s.enableVertexAttribArray(e);var c=d.extInstancedArrays();c.vertexAttribDivisorANGLE(e,null==o?0<d.subInstanceCount()?1:0:o)};return d.location=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],d):e},d.buffer=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],d):t},d.size=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],d):a},d.type=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],d):n},d.normalized=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],d):i},d.stride=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],d):l},d.offset=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],d):r},d.divisor=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],d):o},d},Ut=function(){var e=Ft.FLOAT,t=new Float32Array(0),a=function(a){var n=he(e);return t.length>a?t=new n(t.buffer,0,a):t.length!==a&&(t=new n(a)),t};return a.type=function(){if(!arguments.length)return e;if(e!==(0>=arguments.length?void 0:arguments[0])){e=0>=arguments.length?void 0:arguments[0];var n=he(e);t=new n(0)}return a},a},qt=function(){var e=!0,t=1,a=Ft.FLOAT,n=Ut(),l=function(e){return e},r=null,o=function(){var o=r.length,d=n.type(a)(o*t);if(1<t)for(var s=0,c;s<o;s++){if(c=l(r[s],s),c.length!==t)throw new Error("Expected components array of size ".concat(t,", recieved array with length ").concat(c.length,"."));for(var h=0;h<t;h++)d[s*t+h]=c[h]}else for(var g=0,u;g<o;g++){if(u=l(r[g],g),Array.isArray(u))throw new Error("Expected a single component value, recieved array with length ".concat(u.length,"."));d[g]=u}return e=!1,d};return o.dirty=function(){return e},o.clear=function(){e=!0},o.size=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],e=!0,o):t},o.type=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],e=!0,o):a},o.arrayViewFactory=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],e=!0,o):n},o.value=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],e=!0,o):l},o.data=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],e=!0,o):r},o},Qt=function(){var e=Gt(),t=qt(),a=function a(n){if(e.size(a.size()).type(a.type()),e(n),!!t.dirty()){var i=t(),l=n.context();l.bindBuffer(l.ARRAY_BUFFER,e.buffer()),l.bufferData(l.ARRAY_BUFFER,i,l.DYNAMIC_DRAW)}};return a.clear=function(){e.buffer(null),t.clear()},xe(a,e,"normalized","location","divisor"),xe(a,t,"data","value","size","type"),a},Xt=function(e,t,a,n){for(var i=arguments.length,l=Array(4<i?i-4:0),r=4;r<i;r++)l[r-4]=arguments[r];e[t]=function(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];var o=a[n].apply(a,l.concat(i));return o===a?e:o}},jt=function(){var e=dt().mode(ot.TRIANGLES).subInstanceCount(6),t=it(),a=it(),n=function(){},i=Qt().divisor(0).size(3).type(Ft.UNSIGNED_BYTE).data([[0,0,0],[0,1,0],[1,1,1],[0,0,1],[1,0,0],[1,1,0]]);e.buffers().attribute("aCorner",i);var l=function(i){var l=Ht();e.vertexShader(l.vertex()).fragmentShader(l.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),n(e),e(i-1)};return l.decorate=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],l):n},l.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},xe(l,e,"context","pixelRatio"),Xt(l,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),Xt(l,"crossNextValueAttribute",e.buffers(),"attribute","aCrossNextValue"),Xt(l,"mainValueAttribute",e.buffers(),"attribute","aMainValue"),Xt(l,"mainNextValueAttribute",e.buffers(),"attribute","aMainNextValue"),Xt(l,"baseValueAttribute",e.buffers(),"attribute","aBaseValue"),Xt(l,"baseNextValueAttribute",e.buffers(),"attribute","aBaseNextValue"),Xt(l,"definedAttribute",e.buffers(),"attribute","aDefined"),Xt(l,"definedNextAttribute",e.buffers(),"attribute","aDefinedNext"),l},Zt=function(){var e=st(ct),t=st(ht);return e.appendHeader(ft.header).appendBody(ft.body),t.appendHeader(_t.header).appendBody(_t.body),{vertex:function(){return e},fragment:function(){return t}}},Kt=function(){var e=dt().mode(ot.POINTS),t=it(),a=it(),n=Zt(),i=function(){},l=function(l){e.vertexShader(n.vertex()).fragmentShader(n.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),i(e),e(l)};return l.type=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],l):n},l.decorate=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],l):i},l.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},xe(l,e,"context","pixelRatio"),Xt(l,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),Xt(l,"mainValueAttribute",e.buffers(),"attribute","aMainValue"),Xt(l,"sizeAttribute",e.buffers(),"attribute","aSize"),Xt(l,"definedAttribute",e.buffers(),"attribute","aDefined"),l},Jt=function(){var e=1,t=function(t){t.buffers().uniform("uStrokeWidth",rt(e))};return t.lineWidth=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],t):e},t},$t=function(e){var t=null,a=e,n=!0,i=function(e){var i=e.context();null==t&&(t=i.createBuffer()),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t),n&&(i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array(a),i.STATIC_DRAW),n=!1)};return i.clear=function(){t=null,n=!0},i.data=function(){return arguments.length?(n=!0,a=0>=arguments.length?void 0:arguments[0],i):a},i},ea=function(){var e=dt().mode(ot.TRIANGLES).subInstanceCount(6),t=it(),a=it(),n=function(){},i=Jt(),l=Qt().divisor(0).size(4).type(Ft.BYTE).data([[-1,1,1,0],[1,1,0,1],[1,-1,0,1],[-1,-1,1,0]]);e.buffers().elementIndices($t([0,1,2,2,3,0])).attribute("aCorner",l);var r=function(l){var r=st(ct),o=st(ht);e.vertexShader(r).fragmentShader(o),r.appendHeader("\n            attribute vec4 aCorner;\n            attribute float aCrossValue;\n            attribute float aCrossNextValue;\n            attribute float aMainValue;\n            attribute float aMainNextValue;\n            attribute float aDefined;\n            attribute float aDefinedNext;\n\n            uniform float uStrokeWidth;\n            uniform vec2 uScreen;\n\n            varying float vLength;\n            varying vec2 vPosition;\n        "),r.appendBody("\n            vec4 value = vec4(aCrossValue, aMainValue, 0.0, 1.0);\n            vec4 nextValue = vec4(aCrossNextValue, aMainNextValue, 0.0, 1.0);\n        "),t(e,"value",0),t(e,"nextValue",0),a(e,"value",1),a(e,"nextValue",1),r.appendBody("\n            vec2 position = aCorner[2] * value.xy + aCorner[3] * nextValue.xy;\n\n            vec2 direction = normalize((nextValue.xy - value.xy) * uScreen);\n            vec2 normal = vec2(direction.y, -direction.x);\n            vec2 padding = ((uStrokeWidth / 2.0) / (uScreen / 2.0));\n            \n            padding *= aDefined * aDefinedNext;\n            position += (aCorner[0] * direction + aCorner[1] * normal) * padding;\n\n            gl_Position = vec4(position.x, position.y, 0.0, 1.0);\n\n            vLength = length((nextValue.xy - value.xy) * (uScreen / 2.0));\n            vPosition = aCorner.xy * (uStrokeWidth / 2.0);\n            vPosition.x += aCorner[3] * vLength;\n        "),o.appendHeader("\n            uniform float uStrokeWidth;\n            varying float vLength;\n            varying vec2 vPosition;\n\n            float canFill = 0.0;\n            float canStroke = 1.0;\n        "),o.appendBody("\n            vec2 position = vPosition;\n            position.x -= clamp(position.x, 0.0, vLength);\n            float sdf = length(position) - uStrokeWidth / 2.0;\n            if (sdf > 0.5) {\n                discard;\n            }\n        "),i(e),n(e),e(l-1)};return r.decorate=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},r.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},xe(r,e,"context","pixelRatio"),xe(r,i,"lineWidth"),Xt(r,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),Xt(r,"crossNextValueAttribute",e.buffers(),"attribute","aCrossNextValue"),Xt(r,"mainValueAttribute",e.buffers(),"attribute","aMainValue"),Xt(r,"mainNextValueAttribute",e.buffers(),"attribute","aMainNextValue"),Xt(r,"definedAttribute",e.buffers(),"attribute","aDefined"),Xt(r,"definedNextAttribute",e.buffers(),"attribute","aDefinedNext"),r},ta=function(){var e=st(ct),t=st(ht);return e.appendHeader(wt.header).appendBody(wt.body),t.appendHeader(Bt.header).appendBody(Bt.body),{vertex:function(){return e},fragment:function(){return t}}},aa=function(){var e=dt().mode(ot.TRIANGLES).subInstanceCount(18),t=it(),a=it(),n=Jt(),i=function(){},l=Qt().divisor(0).size(3).type(Ft.BYTE).data([[0,-2,-1],[0,-2,1],[0,2,1],[0,2,-1],[-1,-1,-1],[-1,-1,1],[0,-1,1],[0,-1,-1],[1,1,1],[0,1,1],[0,1,-1],[1,1,-1]]);e.buffers().elementIndices($t([0,1,2,0,3,2,4,5,6,4,7,6,8,9,10,10,11,8])).attribute("aCorner",l);var r=function(l){var r=ta();e.vertexShader(r.vertex()).fragmentShader(r.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),n(e),e.vertexShader().appendBody("\n          gl_Position.x += xModifier / uScreen.x * 2.0;\n          gl_Position.y += yModifier / uScreen.y * 2.0;\n        "),i(e),e(l)};return r.decorate=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],r):i},r.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},xe(r,e,"context","pixelRatio"),xe(r,n,"lineWidth"),Xt(r,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),Xt(r,"openValueAttribute",e.buffers(),"attribute","aOpenValue"),Xt(r,"highValueAttribute",e.buffers(),"attribute","aHighValue"),Xt(r,"lowValueAttribute",e.buffers(),"attribute","aLowValue"),Xt(r,"closeValueAttribute",e.buffers(),"attribute","aCloseValue"),Xt(r,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),Xt(r,"definedAttribute",e.buffers(),"attribute","aDefined"),r},na=function(){var e=st(ct),t=st(ht);return e.appendHeader(Vt.header).appendBody(Vt.body),t.appendHeader(Mt.header).appendBody(Mt.body),{vertex:function(){return e},fragment:function(){return t}}},ia=function(){var e=dt().mode(ot.TRIANGLES).subInstanceCount(6),t=it(),a=it(),n=function(){},i=Qt().divisor(0).size(2).type(Ft.BYTE).data([[-1,-1],[1,1],[-1,1],[1,-1]]);e.buffers().elementIndices($t([0,1,2,0,1,3])).attribute("aCorner",i);var l=function(i){var l=na();e.vertexShader(l.vertex()).fragmentShader(l.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),e.vertexShader().appendBody("\n            gl_Position.x += xModifier / uScreen.x * 2.0;\n        "),n(e),e(i)};return l.decorate=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],l):n},l.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},xe(l,e,"context","pixelRatio"),Xt(l,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),Xt(l,"mainValueAttribute",e.buffers(),"attribute","aMainValue"),Xt(l,"baseValueAttribute",e.buffers(),"attribute","aBaseValue"),Xt(l,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),Xt(l,"definedAttribute",e.buffers(),"attribute","aDefined"),l},la=function(){var e=st(ct),t=st(ht);return e.appendHeader(kt.header).appendBody(kt.body),t.appendHeader(Lt.header).appendBody(Lt.body),{vertex:function(){return e},fragment:function(){return t}}},ra=function(){var e=dt().mode(ot.TRIANGLES).subInstanceCount(18),t=it(),a=it(),n=function(){},i=Jt(),l=Qt().divisor(0).size(3).type(Ft.BYTE).data([[0,1,1],[0,1,-1],[0,-1,-1],[0,-1,1],[1,-1,1],[1,-1,-1],[-1,-1,-1],[-1,-1,1],[-1,1,-1],[-1,1,1],[1,1,1],[1,1,-1]]);e.buffers().elementIndices($t([0,1,2,0,3,2,4,5,6,4,7,6,8,9,10,8,11,10])).attribute("aCorner",l);var r=function(l){var r=la();e.vertexShader(r.vertex()).fragmentShader(r.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),i(e),e.vertexShader().appendBody("\n                gl_Position.x += xModifier / uScreen.x * 2.0;\n                gl_Position.y += yModifier / uScreen.y * 2.0;\n            "),n(e),e(l)};return r.decorate=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},r.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},xe(r,e,"context","pixelRatio"),xe(r,i,"lineWidth"),Xt(r,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),Xt(r,"highValueAttribute",e.buffers(),"attribute","aHighValue"),Xt(r,"lowValueAttribute",e.buffers(),"attribute","aLowValue"),Xt(r,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),Xt(r,"definedAttribute",e.buffers(),"attribute","aDefined"),r},oa=function(){var e=st(ct),t=st(ht);return e.appendHeader(St.header).appendBody(St.body),t.appendHeader(Tt.header).appendBody(Tt.body),{vertex:function(){return e},fragment:function(){return t}}},da=function(){var e=dt().mode(ot.TRIANGLES).subInstanceCount(12),t=it(),a=it(),n=Jt(),i=function(){},l=Qt().divisor(0).size(3).type(Ft.BYTE).data([[0,2,1],[0,2,-1],[0,-2,-1],[0,-2,1],[1,-1,0],[-1,-1,0],[-1,1,0],[1,1,0]]);e.buffers().elementIndices($t([0,1,2,0,3,2,4,5,6,4,7,6])).attribute("aCorner",l);var r=function(l){var r=oa();e.vertexShader(r.vertex()).fragmentShader(r.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),n(e),e.vertexShader().appendBody("\n          gl_Position.x += xModifier / uScreen.x * 2.0;\n          gl_Position.y += yModifier / uScreen.y * 2.0;\n        "),i(e),e(l)};return r.decorate=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],r):i},r.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},xe(r,e,"context","pixelRatio"),xe(r,n,"lineWidth"),Xt(r,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),Xt(r,"openValueAttribute",e.buffers(),"attribute","aOpenValue"),Xt(r,"highValueAttribute",e.buffers(),"attribute","aHighValue"),Xt(r,"lowValueAttribute",e.buffers(),"attribute","aLowValue"),Xt(r,"closeValueAttribute",e.buffers(),"attribute","aCloseValue"),Xt(r,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),Xt(r,"definedAttribute",e.buffers(),"attribute","aDefined"),r},sa=function(){var e=st(ct),t=st(ht);return e.appendHeader(At.header).appendBody(At.body),t.appendHeader(Yt.header).appendBody(Yt.body),{vertex:function(){return e},fragment:function(){return t}}},ca=function(){var e=dt().mode(ot.TRIANGLES).subInstanceCount(54),t=it(),a=it(),n=function(){},i=Jt(),l=Qt().divisor(0).size(4).type(Ft.BYTE).data([[-1,-2,-1,1],[1,-2,-1,1],[1,-2,1,1],[-1,-2,1,1],[0,-2,-1,0],[0,-2,1,0],[0,-1,1,0],[0,-1,-1,0],[-1,-1,-1,1],[1,-1,-1,1],[1,-1,1,1],[-1,-1,1,1],[-1,0,-1,1],[1,0,-1,1],[1,0,1,1],[-1,0,1,1],[-1,1,-1,1],[1,1,-1,1],[1,1,1,1],[-1,1,1,1],[-1,-1,-1,0],[-1,-1,1,0],[-1,1,1,0],[-1,1,-1,0],[1,-1,-1,0],[1,-1,1,0],[1,1,1,0],[1,1,-1,0],[0,2,-1,0],[0,2,1,0],[0,1,1,0],[0,1,-1,0],[-1,2,-1,1],[1,2,-1,1],[1,2,1,1],[-1,2,1,1]]);e.buffers().elementIndices($t([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23,24,25,26,24,26,27,28,29,30,28,30,31,32,33,34,32,34,35])).attribute("aCorner",l);var r=function(l){var r=sa();e.vertexShader(r.vertex()).fragmentShader(r.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),i(e),e.vertexShader().appendBody("\n            gl_Position.x += xModifier / uScreen.x * 2.0;\n            gl_Position.y += yModifier / uScreen.y * 2.0;\n        "),n(e),e(l)};return r.decorate=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},r.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},xe(r,e,"context","pixelRatio"),xe(r,i,"lineWidth"),Xt(r,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),Xt(r,"highValueAttribute",e.buffers(),"attribute","aHighValue"),Xt(r,"upperQuartileValueAttribute",e.buffers(),"attribute","aUpperQuartileValue"),Xt(r,"medianValueAttribute",e.buffers(),"attribute","aMedianValue"),Xt(r,"lowerQuartileValueAttribute",e.buffers(),"attribute","aLowerQuartileValue"),Xt(r,"lowValueAttribute",e.buffers(),"attribute","aLowValue"),Xt(r,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),Xt(r,"capAttribute",e.buffers(),"attribute","aCapWidth"),Xt(r,"definedAttribute",e.buffers(),"attribute","aDefined"),r},ha=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(0<e||0>t)throw new Error("Offset values (".concat(e," & ").concat(t,") must straddle 0 "));var a=Gt(),n=qt(),i=function i(l){var r=i.size()*ce(i.type()),o=be(e)*r;if(a.offset(o).size(i.size()).type(i.type()),a(l),!!n.dirty()){var d=n(),s=o+d.length*ce(i.type())+t*r,c=l.context();c.bindBuffer(c.ARRAY_BUFFER,a.buffer()),c.bufferData(c.ARRAY_BUFFER,s,c.DYNAMIC_DRAW),c.bufferSubData(c.ARRAY_BUFFER,o,d)}};return i.offset=function(n){if(e>n||n>t)throw new Error("Requested offset ".concat(n," exceeds bounds (").concat(e," & ").concat(t,") "));var l=function(t){a.offset((n-e)*i.size()*ce(i.type())),a(t)};return xe(l,i,"clear","location"),l},i.clear=function(){a.buffer(null),n.clear()},xe(i,a,"normalized","location","divisor"),xe(i,n,"data","value","size","type"),i},ga=function(){var e=it(),t=function(e){return"linear".concat(e)},a=function a(n,i,l){n.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(t(l),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(t(l),"Scale;")).appendBody("".concat(i," = ").concat(i," + ").concat(t(l),"Offset;")).appendBody("".concat(i," = ").concat(i," * ").concat(t(l),"Scale;"));var r=e.domain()[1]-e.domain()[0],o=e.range()[1]-e.range()[0],d=e.range()[0]*(r/o)-e.domain()[0],s=[0,0,0,0],a=[1,1,1,1];s[l]=d,a[l]=o/r,n.buffers().uniform("".concat(t(l),"Offset"),rt(s)).uniform("".concat(t(l),"Scale"),rt(a))};return we(a,e),a},ua=function(){function e(e,t){var a=Math.log10;return a(e)/a(t)}var t=it(),a=10,n=function(e){return"log".concat(e)},i=function i(l,r,o){var d="".concat(n(o),"Offset + (").concat(n(o),"Scale * clamp(log(").concat(r,") / log(").concat(n(o),"Base), -inf, inf))");l.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(n(o),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(n(o),"Scale;")).appendHeaderIfNotExists("uniform vec4 ".concat(n(o),"Include;")).appendHeaderIfNotExists("uniform float ".concat(n(o),"Base;")).appendBody("".concat(r," = (").concat(n(o),"Include * (").concat(d,")) + ((1.0 - ").concat(n(o),"Include) * ").concat(r,");"));var s=e(t.domain()[1],a)-e(t.domain()[0],a),c=t.range()[1]-t.range()[0],h=c/s,g=t.range()[0]-h*e(t.domain()[0],a),u=[0,0,0,0],i=[0,0,0,0],f=[0,0,0,0];u[o]=g,i[o]=h,f[o]=1,l.buffers().uniform("".concat(n(o),"Offset"),rt(u)).uniform("".concat(n(o),"Scale"),rt(i)).uniform("".concat(n(o),"Include"),rt(f)).uniform("".concat(n(o),"Base"),rt(a))};return i.base=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],i):a},we(i,t),i},fa=function(){function e(t,a){var e=Math.pow,n=Math.sign;return n(t)*e(be(t),a)}var t=it(),a=1,n=function(e){return"pow".concat(e)},i=function i(l,r,o){var d="".concat(n(o),"Offset + (").concat(n(o),"Scale * sign(").concat(r,") * pow(abs(").concat(r,"), vec4(").concat(n(o),"Exp)))");l.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(n(o),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(n(o),"Scale;")).appendHeaderIfNotExists("uniform vec4 ".concat(n(o),"Include;")).appendHeaderIfNotExists("uniform float ".concat(n(o),"Exp;")).appendBody("".concat(r," = (").concat(n(o),"Include * (").concat(d,")) + ((1.0 - ").concat(n(o),"Include) * ").concat(r,");"));var s=e(t.domain()[1],a)-e(t.domain()[0],a),c=t.range()[1]-t.range()[0],h=c/s,g=t.range()[0]-h*e(t.domain()[0],a),u=[0,0,0,0],i=[0,0,0,0],f=[0,0,0,0];u[o]=g,i[o]=h,f[o]=1,l.buffers().uniform("".concat(n(o),"Offset"),rt(u)).uniform("".concat(n(o),"Scale"),rt(i)).uniform("".concat(n(o),"Include"),rt(f)).uniform("".concat(n(o),"Exp"),rt(a))};return i.exponent=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],i):a},we(i,t),i},pa=a.scaleLinear().copy.toString(),ya=a.scaleLog().copy.toString(),ma=a.scalePow().copy.toString(),ba=a.scaleTime().copy.toString(),va=a.scaleIdentity(),xa=Date.now(),Sa=function(e){return e-xa},wa=function(e){switch(e.copy.toString()){case pa:return{scale:va,webglScale:ga().domain(e.domain())};case ba:return{scale:Sa,webglScale:ga().domain(e.domain().map(Sa))};case ya:return{scale:va,webglScale:ua().domain(e.domain()).base(e.base())};case ma:return{scale:va,webglScale:fa().domain(e.domain()).exponent(e.exponent())};default:return{scale:e.copy(),webglScale:ga().domain(e.range())};}},Va=function(){var e=st(ct),t=st(ht);return e.appendHeader(mt.header).appendBody(mt.body),t.appendHeader(zt.header).appendBody(zt.body),{vertex:function(){return e},fragment:function(){return t}}},ka=function(){var e=st(ct),t=st(ht);return e.appendHeader(vt.header).appendBody(vt.body),t.appendHeader(Nt.header).appendBody(Nt.body),{vertex:function(){return e},fragment:function(){return t}}},Ca=function(){var e=st(ct),t=st(ht);return e.appendHeader(xt.header).appendBody(xt.body),t.appendHeader(Pt.header).appendBody(Pt.body),{vertex:function(){return e},fragment:function(){return t}}},Aa=function(){var e=st(ct),t=st(ht);return e.appendHeader(bt.header).appendBody(bt.body),t.appendHeader(It.header).appendBody(It.body),{vertex:function(){return e},fragment:function(){return t}}},_a=function(){var e=st(ct),t=st(ht);return e.appendHeader(pt.header).appendBody(pt.body),t.appendHeader(Et.header).appendBody(Et.body),{vertex:function(){return e},fragment:function(){return t}}},Ea=function(){var e=st(ct),t=st(ht);return e.appendHeader(yt.header).appendBody(yt.body),t.appendHeader(Dt.header).appendBody(Dt.body),{vertex:function(){return e},fragment:function(){return t}}},Da=function(e){switch(e){case d.symbolCircle:return Zt();case d.symbolSquare:return Va();case d.symbolTriangle:return ka();case d.symbolCross:return Ca();case d.symbolDiamond:return Aa();case d.symbolStar:return _a();case d.symbolWye:return Ea();default:throw new Error("Unrecognised symbol: ".concat(e));}},za=function(e){var t=Gt().divisor(1),a=e,n=!0,i=function(e){if(t(e),!!n){if(!Array.isArray(a))throw new Error("Expected an array, received: ".concat(a));if(a.length!==t.size())throw new Error("Expected array of length: ".concat(t.size(),", recieved array of length: ").concat(a.length));var i=e.context();i["vertexAttrib".concat(a.length,"fv")](t.location(),a),i.disableVertexAttribArray(t.location()),n=!1}};return i.clear=function(){n=!0},i.value=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],n=!0,i):a},xe(i,t,"normalized","size","location"),i},Ia=function(){var e=et(),t=ha(0,1),a=t.offset(1),n=ha(0,1),i=n.offset(1),l=ha(0,1).type(Ft.UNSIGNED_BYTE),r=l.offset(1),o=ea().crossValueAttribute(t).crossNextValueAttribute(a).mainValueAttribute(n).mainNextValueAttribute(i).definedAttribute(l).definedNextAttribute(r),d=function(){return!1},s=wa,c=[],h=null,g=null,u=function(a){var r=s(e.xScale()),u=s(e.yScale()),f=!d(c,a);f&&(c=a,l.value(function(t,a){return e.defined()(t,a)}).data(a)),(f||r.scale!==h)&&(h=r.scale,"vertical"===e.orient()?t.value(function(t,a){return r.scale(e.crossValue()(t,a))}).data(a):t.value(function(t,a){return r.scale(e.mainValue()(t,a))}).data(a)),(f||u.scale!==g)&&(g=u.scale,"vertical"===e.orient()?n.value(function(t,a){return u.scale(e.mainValue()(t,a))}).data(a):n.value(function(t,a){return u.scale(e.crossValue()(t,a))}).data(a)),o.xScale(r.webglScale).yScale(u.webglScale).decorate(function(t){return e.decorate()(t,a,0)}),o(a.length)};return u.equals=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],u):d},u.scaleMapper=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],u):s},we(u,e,ke("baseValue","bandwidth","align")),xe(u,o,"context","lineWidth","pixelRatio"),u},Na=function(){var e=d.symbol(),t=et(),a=Me("g","point"),n=function(e){return"translate("+e[0]+", "+e[1]+")"},i=function(i){Le(i)&&a.transition(i),i.each(function(i,l,r){var d=i.filter(t.defined()),s=a(o.select(r[l]),d);s.enter().attr("transform",function(e,a){return n(t.values(e,a).origin)}).attr("fill",tt.gray).attr("stroke",tt.black).append("path"),s.attr("transform",function(e,a){return n(t.values(e,a).origin)}).select("path").attr("d",e),t.decorate()(s,i,l)})};return we(i,t,ke("baseValue","bandwidth","align")),xe(i,a,"key"),xe(i,e,"type","size"),i},Pa=function(){var e=d.symbol(),t=et(),a=function(a){var n=a.filter(t.defined()),l=e.context();n.forEach(function(a,n){l.save();var i=t.values(a,n);l.translate(i.origin[0],i.origin[1]),l.beginPath(),l.strokeStyle=tt.black,l.fillStyle=tt.gray,t.decorate()(l,a,n),e(a,n),l.fill(),l.stroke(),l.closePath(),l.restore()})};return we(a,t,ke("baseValue","bandwidth","align")),xe(a,e,"size","type","context"),a},Ta=function(){var e=function(e){return e.high},t=function(e){return e.low},n=function(e){return e.cross},l="vertical",r="center",o=function(){return 5},s=$e({decorate:function(){},defined:function(a,l){return se(t,e,n)(a,l)},xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return s.values=function(a,d){var i=o(a,d),c=Je(r,i),h=s.xScale(),g=s.yScale();if("vertical"===l){var u=g(e(a,d));return{origin:[h(n(a,d))+c,u],high:0,low:g(t(a,d))-u,width:i}}var f=h(t(a,d));return{origin:[f,g(n(a,d))+c],high:h(e(a,d))-f,low:0,width:i}},s.xValues=function(){return"vertical"===l?[n]:[e,t]},s.yValues=function(){return"vertical"===l?[e,t]:[n]},s.orient=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],s):l},s.lowValue=function(){return arguments.length?(t=Ke(0>=arguments.length?void 0:arguments[0]),s):t},s.highValue=function(){return arguments.length?(e=Ke(0>=arguments.length?void 0:arguments[0]),s):e},s.crossValue=function(){return arguments.length?(n=Ke(0>=arguments.length?void 0:arguments[0]),s):n},s.bandwidth=function(){return arguments.length?(o=Ke(0>=arguments.length?void 0:arguments[0]),s):o},s.align=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],s):r},s},Ba=function(){var e=function(e){return e.date},t=function(e){return e.open},n=function(e){return e.high},l=function(e){return e.low},r=function(e){return e.close},o=function(){return 5},s="center",c=function(t,a){return h.xScale()(e(t,a))},h;return h=$e({decorate:function(){},defined:function(a,o){return se(e,t,l,n,r)(a,o)},xScale:a.scaleIdentity(),yScale:a.scaleIdentity()}),h.values=function(e,a){var i=r(e,a),d=t(e,a),g=o(e,a),u=Je(s,g),f="";return i>d?f="up":i<d&&(f="down"),{cross:c(e,a)+u,open:h.yScale()(d),high:h.yScale()(n(e,a)),low:h.yScale()(l(e,a)),close:h.yScale()(i),width:g,direction:f}},h.xValues=function(){return[e]},h.yValues=function(){return[t,n,l,r]},h.crossValue=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],h):e},h.openValue=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],h):t},h.highValue=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],h):n},h.lowValue=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],h):l},h.yValue=h.closeValue=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],h):r},h.bandwidth=function(){return arguments.length?(o=Ke(0>=arguments.length?void 0:arguments[0]),h):o},h.align=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],h):s},h},Ra=function(e,t){var a=Ba(),n=Me("g",t),l=function(e){return"translate("+e.cross+", "+e.high+")"},r=function(e){return function(t){return Le(e)?t.transition(e):t}},d=function(i){Le(i)&&n.transition(i);var s=r(i);i.each(function(i,r,d){var c=i.filter(a.defined()),h=n(o.select(d[r]),c);h.enter().attr("transform",function(e,t){return l(a.values(e,t))+" scale(1e-6, 1)"}).append("path"),h.each(function(n,r,i){var d=a.values(n,r),c="up"===d.direction?tt.green:tt.red,h=s(o.select(i[r])).attr("class",t+" "+d.direction).attr("stroke",c).attr("fill",c).attr("transform",function(){return l(d)+" scale(1)"});e.x(0).width(d.width).open(function(){return d.open-d.high}).high(0).low(function(){return d.low-d.high}).close(function(){return d.close-d.high}),h.select("path").attr("d",e([n]))}),a.decorate()(h,i,r)})};return xe(d,n,"key"),we(d,a),d},Ya=function(e){var t=Ba(),a=function(a){var n=a.filter(t.defined()),l=e.context();n.forEach(function(a,n){l.save();var i=t.values(a,n);l.translate(i.cross,i.high),l.beginPath(),e.x(0).open(function(){return i.open-i.high}).width(i.width).high(0).low(function(){return i.low-i.high}).close(function(){return i.close-i.high})([a]);var r="up"===i.direction?tt.green:tt.red;l.strokeStyle=r,l.fillStyle=r,t.decorate()(l,a,n),l.fill(),l.stroke(),l.closePath(),l.restore()})};return xe(a,e,"context"),we(a,t),a},La=function(e){var t=Ba(),a=Qt(),n=Qt(),i=Qt(),l=Qt(),r=Qt(),o=Qt().type(Ft.UNSIGNED_SHORT),d=Qt().type(Ft.UNSIGNED_BYTE);e.crossValueAttribute(a).openValueAttribute(n).highValueAttribute(i).lowValueAttribute(l).closeValueAttribute(r).bandwidthAttribute(o).definedAttribute(d);var s=function(){return!1},c=wa,h=[],g=null,u=null,f=function(f){var p=c(t.xScale()),y=c(t.yScale()),m=!s(h,f);m&&(h=f,o.value(function(e,a){return t.bandwidth()(e,a)}).data(f),d.value(function(e,a){return t.defined()(e,a)}).data(f)),(m||p.scale!==g)&&(g=p.scale,a.value(function(e,a){return p.scale(t.crossValue()(e,a))}).data(f)),(m||y.scale!==u)&&(u=y.scale,n.value(function(e,a){return y.scale(t.openValue()(e,a))}).data(f),i.value(function(e,a){return y.scale(t.highValue()(e,a))}).data(f),l.value(function(e,a){return y.scale(t.lowValue()(e,a))}).data(f),r.value(function(e,a){return y.scale(t.closeValue()(e,a))}).data(f)),e.xScale(p.webglScale).yScale(y.webglScale).decorate(function(e){return t.decorate()(e,f,0)}),e(f.length)};return f.equals=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],f):s},f.scaleMapper=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],f):c},we(f,t,ke("align")),xe(f,e,"context","lineWidth","pixelRatio"),f},Ma=function(){var e=function(e){return e.upperQuartile},t=function(e){return e.lowerQuartile},n=function(e){return e.high},l=function(e){return e.low},r=function(e){return e.value},o=function(e){return e.median},s="vertical",c="center",h=function(){return 5},g=$e({decorate:function(){},defined:function(a,d){return se(l,n,t,e,r,o)(a,d)},xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return g.values=function(a,d){var i=h(a,d),u=Je(c,i),f=g.xScale(),p=g.yScale();if("vertical"===s){var m=p(n(a,d));return{origin:[f(r(a,d))+u,m],high:0,upperQuartile:p(e(a,d))-m,median:p(o(a,d))-m,lowerQuartile:p(t(a,d))-m,low:p(l(a,d))-m,width:i}}var y=f(l(a,d));return{origin:[y,p(r(a,d))+u],high:f(n(a,d))-y,upperQuartile:f(e(a,d))-y,median:f(o(a,d))-y,lowerQuartile:f(t(a,d))-y,low:0,width:i}},g.xValues=function(){return"vertical"===s?[r]:[e,t,n,l,o]},g.yValues=function(){return"vertical"===s?[e,t,n,l,o]:[r]},g.orient=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],g):s},g.lowerQuartileValue=function(){return arguments.length?(t=Ke(0>=arguments.length?void 0:arguments[0]),g):t},g.upperQuartileValue=function(){return arguments.length?(e=Ke(0>=arguments.length?void 0:arguments[0]),g):e},g.lowValue=function(){return arguments.length?(l=Ke(0>=arguments.length?void 0:arguments[0]),g):l},g.highValue=function(){return arguments.length?(n=Ke(0>=arguments.length?void 0:arguments[0]),g):n},g.crossValue=function(){return arguments.length?(r=Ke(0>=arguments.length?void 0:arguments[0]),g):r},g.medianValue=function(){return arguments.length?(o=Ke(0>=arguments.length?void 0:arguments[0]),g):o},g.bandwidth=function(){return arguments.length?(h=Ke(0>=arguments.length?void 0:arguments[0]),g):h},g.align=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],g):c},g},Wa=function(){var e=[],t=function(e){return e},n=function(e,t){return t},i=$e({decorate:function(){},xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return i.xValues=function(){return e.map(function(e){return e.xValues()}).reduce(function(e,t){return e.concat(t)})},i.yValues=function(){return e.map(function(e){return e.yValues()}).reduce(function(e,t){return e.concat(t)})},i.mapping=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],i):t},i.key=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],i):n},i.series=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],i):e},i},Oa=function(){var e=Wa(),t=Me("g"),a=Me("g","multi"),n=function(n){Le(n)&&(a.transition(n),t.transition(n));var i=e.mapping(),l=e.series(),r=e.xScale(),d=e.yScale();n.each(function(n,s,c){var h=a(o.select(c[s]),l);h.each(function(e,a,s){e.xScale(r).yScale(d);var c=i(n,a,l),h=t(o.select(s[a]),[c]);h.call(e)}),h.selection().order(),e.decorate()(h,n,s)})};return we(n,e),xe(n,a,"key"),n},Ha=function(){var e=null,t=Wa(),a=function(a){var n=t.mapping(),i=t.series(),l=t.xScale(),r=t.yScale();i.forEach(function(o,s){var c=n(a,s,i);o.context(e).xScale(l).yScale(r);var h;o.decorate?(h=o.decorate(),o.decorate(function(e,n,l){t.decorate()(e,a,s),h(e,n,l)})):t.decorate()(e,a,s),o(c),h&&o.decorate(h)})};return a.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],a):e},we(a,t),a},Fa=function(){var e=null,t=1,a=Wa(),n=function(n){var i=a.mapping(),l=a.series(),r=a.xScale(),o=a.yScale();l.forEach(function(d,s){var c=i(n,s,l);d.context(e).pixelRatio(t).xScale(r).yScale(o);var h;d.decorate?(h=d.decorate(),d.decorate(function(e,t,l){a.decorate()(e,n,s),h(e,t,l)})):a.decorate()(e,n,s),d(c),h&&d.decorate(h)})};return n.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],n):e},n.pixelRatio=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],n):t},we(n,a),n},Ga=function(){var e=function(){return 50},n="center",l=a.scaleBand(),r=$e({decorate:function(){},xScale:a.scaleLinear(),yScale:a.scaleLinear()});return r.offsetScaleForDatum=function(a,r,o){var i=e(r,o),d=Je(n,i),s=i/2;return l.domain(t.range(0,a.length)).range([-s+d,s+d])},r.bandwidth=function(){return arguments.length?(e=Ke(0>=arguments.length?void 0:arguments[0]),r):e},r.align=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},we(r,l,Ae({paddingInner:"paddingOuter"})),r},Ua=function(e){return e.sort(t.ascending).filter(function(e,t,a){return-1===a.indexOf(e,t+1)})},qa=function(){var e=function(e){return e.x},n=function(e){return e.y},l=function(e){return e.color},r=function(){return 5},o=function(){return 5},d=s.interpolateViridis,c=$e({decorate:function(){},defined:function(t,a){return se(e,n,l)(t,a)},xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return c.pathGenerator=Ne().x(0).y(0),c.colorScale=function(e){var n=e.map(l);return a.scaleLinear().domain([t.min(n),t.max(n)])},c.values=function(t,a){return{x:c.xScale()(e(t,a)),y:c.yScale()(n(t,a)),colorValue:l(t,a),width:o(t,a),height:r(t,a)}},c.xValues=function(){return[e]},c.yValues=function(){return[n]},c.xValue=function(){return arguments.length?(e=Ke(0>=arguments.length?void 0:arguments[0]),c):e},c.yValue=function(){return arguments.length?(n=Ke(0>=arguments.length?void 0:arguments[0]),c):n},c.colorValue=function(){return arguments.length?(l=Ke(0>=arguments.length?void 0:arguments[0]),c):l},c.colorInterpolate=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],c):d},c.xBandwidth=function(){return arguments.length?(o=Ke(0>=arguments.length?void 0:arguments[0]),c):o},c.yBandwidth=function(){return arguments.length?(r=Ke(0>=arguments.length?void 0:arguments[0]),c):r},we(c,c.pathGenerator,Ae({horizontalAlign:"xAlign",verticalAlign:"yAlign"})),c},Qa=function(e){return"function"==typeof e?e:function(){return e}},Xa=function(){var e=a.scaleIdentity(),t=a.scaleIdentity(),n=function(e){return e},i=n,l=function(){},r="horizontal",d=Me("g","annotation-line"),s=function(a){if(Le(a)&&d.transition(a),"horizontal"!==r&&"vertical"!==r)throw new Error("Invalid orientation");var s="horizontal"===r,c=s?function(e,t){return"translate(".concat(e,", ").concat(t,")")}:function(e,t){return"translate(".concat(t,", ").concat(e,")")},h=s?"x2":"y2",g=s?e:t,u=s?t:e,f=s?"left-handle":"bottom-handle",p=s?"right-handle":"top-handle",y=s?"9":"0",m=s?"0":"9",b=s?"0.32em":"0.71em",v=s?"start":"middle",x=g.range(),S=function(){return c(x[0],u(n.apply(void 0,arguments)))},w=x[1]-x[0];a.each(function(e,t,a){var n=d(o.select(a[t]),e),s=n.enter().attr("transform",S).style("stroke","#bbb");s.append("line").attr(h,w),s.append("g").classed(f,!0).style("stroke","none"),s.append("g").classed(p,!0).style("stroke","none").attr("transform",c(w,0)).append("text").attr("text-anchor",v).attr("x",y).attr("y",m).attr("dy",b),n.attr("class","annotation-line ".concat(r)),n.attr("transform",S),n.select("line").attr(h,w),n.select("g."+p).attr("transform",c(w,0)),n.select("text").text(i),l(n,e,t)})};return s.xScale=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],s):e},s.yScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],s):t},s.value=function(){return arguments.length?(n=Qa(0>=arguments.length?void 0:arguments[0]),s):n},s.label=function(){return arguments.length?(i=Qa(0>=arguments.length?void 0:arguments[0]),s):i},s.decorate=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],s):l},s.orient=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],s):r},s},ja=function(){var e=a.scaleIdentity(),t=a.scaleIdentity(),n=function(e){return e},l=n,r=function(){},o="horizontal",s=d.line(),c=function(a){if("horizontal"!==o&&"vertical"!==o)throw new Error("Invalid orientation");var c="horizontal"===o,h=s.context(),g=c?e:t,u=c?t:e,f=g.domain(),p=c?9:0,m=c?0:9,b=c?"left":"center",v=c?"middle":"hanging";a.forEach(function(e,t){h.save(),h.beginPath(),h.strokeStyle="#bbb",h.fillStyle="#000",h.textAlign=b,h.textBaseline=v,r(h,e,t),s.context(h)(f.map(function(t){var a=[g(t),u(n(e))];return c?a:a.reverse()}));var a=c?g(f[1]):u(n(e)),i=c?u(n(e)):g(f[1]);h.fillText(l(e),a+p,i+m),h.fill(),h.stroke(),h.closePath(),h.restore()})};return c.xScale=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],c):e},c.yScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],c):t},c.value=function(){return arguments.length?(n=Qa(0>=arguments.length?void 0:arguments[0]),c):n},c.label=function(){return arguments.length?(l=Qa(0>=arguments.length?void 0:arguments[0]),c):l},c.decorate=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],c):r},c.orient=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],c):o},xe(c,s,"context"),c},Za=function(){var e=a.scaleIdentity(),t=[10],n=null,i=function(){var a;return null==n?e.ticks?(a=e).ticks.apply(a,Y(t)):e.domain():n};return i.scale=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],i):e},i.ticks=function(){for(var e=arguments.length,a=Array(e),n=0;n<e;n++)a[n]=arguments[n];return t=a,i},i.tickArguments=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],i):t},i.tickValues=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],i):n},i},Ka=function(e){return e},Ja=function(e){return e},$a=function(e,t,a,n){return e[t]?e[t].apply(e,a):n},en=function(e){var t;return null!==(t=e.tickValues())&&void 0!==t?t:$a(e.scale(),"ticks",e.tickArguments(),e.scale().domain())},tn=function(e){var t;return null!==(t=e.tickFormat())&&void 0!==t?t:$a(e.scale(),"tickFormat",e.tickArguments(),Ja)},an=function(e){return e},nn=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=[10],i=null,l=function(){},r=null,s=6,c=6,h=3,u=d.line(),f=Me("g","tick").key(an),p=Me("path","domain"),y=function(){return{offset:[0,c+h]}},m=function(){return{path:[[0,0],[0,c]]}},b=a.labelOffset||y,v=a.tickPath||m,x=function(e,t){var a=0;return e.bandwidth&&(a=e.bandwidth()/2,e.round()&&(a=ge(a))),function(n){return t(e(n)+a,0)}},S=function(e,t){return V()?"translate(".concat(t,", ").concat(e,")"):"translate(".concat(e,", ").concat(t,")")},w=function(e){return V()?e.map(function(e){return[e[1],e[0]]}):e},V=function(){return"left"===e||"right"===e},k=function a(n){Le(n)&&(f.transition(n),p.transition(n)),n.each(function(n,i,r){var d=r[i],c=o.select(d);d.__scale__||c.attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","right"===e?"start":"left"===e?"end":"middle");var h=d.__scale__||t;d.__scale__=t.copy();var y=en(a),m=tn(a),k="bottom"===e||"right"===e?1:-1,C=function(e){var t=B(e,2),a=t[0],n=t[1];return[a,k*n]},A=t.range(),_=w([[A[0],k*s],[A[0],0],[A[1],0],[A[1],k*s]]),E=p(c,[n]);E.enter().attr("stroke","#000"),E.attr("d",u(_));var D=f(c,y),g=y.map(function(e,t){return b(e,t,y)}),z=y.map(function(e,t){return v(e,t,y)});D.enter().attr("transform",x(h,S)).append("path").attr("stroke","#000"),D.enter().append("text").attr("transform",function(e,t){return S.apply(void 0,Y(C(g[t].offset)))}).attr("fill","#000"),D.exit().attr("transform",x(t,S)),D.select("path").attr("visibility",function(e,t){return z[t].hidden&&"hidden"}).attr("d",function(e,t){return u(w(z[t].path.map(C)))}),D.select("text").attr("visibility",function(e,t){return g[t].hidden&&"hidden"}).attr("transform",function(e,t){return S.apply(void 0,Y(C(g[t].offset)))}).attr("dy",function(){var t="0em";return V()?t="0.32em":"bottom"===e&&(t="0.71em"),t}).text(m),D.attr("transform",x(t,S)),l(D,n,i)})};return k.tickFormat=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],k):r},k.tickSize=function(){return arguments.length?(c=s=+(0>=arguments.length?void 0:arguments[0]),k):c},k.tickSizeInner=function(){return arguments.length?(c=+(0>=arguments.length?void 0:arguments[0]),k):c},k.tickSizeOuter=function(){return arguments.length?(s=+(0>=arguments.length?void 0:arguments[0]),k):s},k.tickPadding=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],k):h},k.decorate=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],k):l},k.scale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],k):t},k.ticks=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return n=[].concat(t),k},k.tickArguments=function(){return arguments.length?(n=null==(0>=arguments.length?void 0:arguments[0])?[]:Y(0>=arguments.length?void 0:arguments[0]),k):null===n?null:n.slice()},k.tickValues=function(){return arguments.length?(i=null==(0>=arguments.length?void 0:arguments[0])?[]:Y(0>=arguments.length?void 0:arguments[0]),k):null===i?null:i.slice()},k.orient=function(){return e},k},ln=function e(t,a){var n=!1,i=function(e,t,i){var r=0,o=l.tickSizeInner()+l.tickPadding(),d=!1;if(n){var s=a(e),c=t<i.length-1?a(i[t+1]):a.range()[1];r=(c-s)/2,o=l.tickPadding(),d=t===i.length-1&&s===c}return{offset:[r,o],hidden:d}},l=nn(t,a,{labelOffset:i}),e=function(e){return l(e)};return e.tickCenterLabel=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],e):n},we(e,l),e},rn=function(e){return ln("top",e)},on=function(e){return ln("bottom",e)},dn=function(e){return ln("left",e)},sn=function(e){return ln("right",e)},cn=function(e,t){var a=null,n=function(e,a,n){if(t.step)return t.step();var i=t(e);return a<n.length-1?t(n[a+1])/i:2*(t.range()[1]-i)},i=function(e,t,i){var r=0;return r=a?a(e,t):n(e,t,i)/2,{path:[[r,0],[r,l.tickSizeInner()]],hidden:t===i.length-1}},l=nn(e,t,{labelOffset:function(){return{offset:[0,l.tickPadding()]}},tickPath:i}),r=function(e){l(e)};return r.tickOffset=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},we(r,l),r},hn=function(e){return function(t){var a=en(e),n=tn(e),i=a.map(n),r=t.append("text"),o=i.map(function(e){return r.text(e).node().getBBox()}),d=me.apply(Math,Y(o.map(function(e){return e.height}))),s=me.apply(Math,Y(o.map(function(e){return e.width})));return r.remove(),{maxHeight:d,maxWidth:s,labelCount:i.length}}},gn="__d3fc-elements__",un=function(e){return e[gn]||{}},fn=function(e,t){e[gn]=t},pn=function(e){return delete e[gn]},yn=function(e){return"D3FC-GROUP"===e.tagName?[e].concat(Y(e.querySelectorAll("d3fc-canvas, d3fc-group, d3fc-svg"))):[e]},mn=function(e){var t=un(e),a=t.width,n=t.height,i=e.useDevicePixelRatio&&null!=window.devicePixelRatio?window.devicePixelRatio:1,l=e.clientWidth*i,r=e.clientHeight*i,o=e.children[0];fn(e,{pixelRatio:i,width:l,height:r,resized:l!==a||r!==n,child:o})};if("function"!=typeof CustomEvent)throw new Error("d3fc-element depends on CustomEvent. Make sure that you load a polyfill in older browsers. See README.");var bn=function(e){var t=un(e),a=new CustomEvent("measure",{detail:t});e.dispatchEvent(a)},vn=function(e){var t=un(e),a=new CustomEvent("draw",{detail:t});e.dispatchEvent(a)},xn=function(e){var t=e.map(yn).reduce(function(e,t){return e.concat(t)});t.forEach(mn),t.forEach(bn),t.forEach(vn)},Sn=function(e){return un(e.ownerDocument).queue||[]},wn=function(e,t){var a=un(e.ownerDocument),n=a.requestId;null==n&&(n=requestAnimationFrame(function(){var t=Sn(e);xn(t),Vn(e)})),fn(e.ownerDocument,{queue:t,requestId:n})},Vn=function(e){return pn(e.ownerDocument)},kn=function(e,t){var a=e;do if(a.parentNode===t)return!0;while(a=a.parentNode);return!1},Cn=function(e){var t=Sn(e),a=-1<t.indexOf(e);if(!a){var n=t.some(function(t){return kn(e,t)});if(!n){var i=t.filter(function(t){return!kn(t,e)});i.push(e),wn(e,i)}}};if("function"!=typeof HTMLElement)throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var An=function(e){null!=e.__measureListener__||(e.__measureListener__=function(t){return e.setMeasurements(t.detail)},e.addEventListener("measure",e.__measureListener__))},_n=function(e){null==e.__measureListener__||(e.removeEventListener("measure",e.__measureListener__),e.__measureListener__=null)},En=function(e,t){return function(a){function n(){return w(this,n),i.apply(this,arguments)}C(n,a);var i=T(n);return k(n,[{key:"attributeChangedCallback",value:function(e){"use-device-pixel-ratio"===e?this.requestRedraw():void 0}},{key:"connectedCallback",value:function(){0===this.childNodes.length&&this.appendChild(e()),An(this)}},{key:"disconnectedCallback",value:function(){_n(this)}},{key:"setMeasurements",value:function(e){var a=e.width,n=e.height,i=R(this.childNodes),l=i[0],r=i.slice(1);if(0<r.length)throw new Error("A d3fc-svg/canvas element must only contain a single svg/canvas element.");t(this,l,{width:a,height:n})}},{key:"requestRedraw",value:function(){Cn(this)}},{key:"useDevicePixelRatio",get:function(){return this.hasAttribute("use-device-pixel-ratio")&&"false"!==this.getAttribute("use-device-pixel-ratio")},set:function(e){e&&!this.useDevicePixelRatio?this.setAttribute("use-device-pixel-ratio",""):!e&&this.useDevicePixelRatio&&this.removeAttribute("use-device-pixel-ratio"),this.requestRedraw()}}],[{key:"observedAttributes",get:function(){return["use-device-pixel-ratio"]}}]),n}(I(HTMLElement))},Dn=function(e){function t(){return w(this,t),a.apply(this,arguments)}C(t,e);var a=T(t);return k(t,[{key:"setWebglViewport",get:function(){return this.hasAttribute("set-webgl-viewport")&&"false"!==this.getAttribute("set-webgl-viewport")},set:function(e){e&&!this.setWebglViewport?this.setAttribute("set-webgl-viewport",""):!e&&this.setWebglViewport&&this.removeAttribute("set-webgl-viewport"),this.requestRedraw()}}]),t}(En(function(){return document.createElement("canvas")},function(e,t,a){var n=a.width,i=a.height;if(t.setAttribute("width",n),t.setAttribute("height",i),e.setWebglViewport){var l=t.getContext("webgl");l.viewport(0,0,n,i)}})),zn=function(e){e.autoResize?In(e):Nn(e)},In=function(e){null!=e.__autoResizeListener__||(e.__autoResizeListener__=function(){return Cn(e)},addEventListener("resize",e.__autoResizeListener__))},Nn=function(e){null==e.__autoResizeListener__||(removeEventListener("resize",e.__autoResizeListener__),e.__autoResizeListener__=null)},Pn=function(e){function t(){return w(this,t),a.apply(this,arguments)}C(t,e);var a=T(t);return k(t,[{key:"connectedCallback",value:function(){zn(this)}},{key:"disconnectedCallback",value:function(){Nn(this)}},{key:"requestRedraw",value:function(){Cn(this)}},{key:"attributeChangedCallback",value:function(e){"auto-resize"===e?zn(this):void 0}},{key:"autoResize",get:function(){return this.hasAttribute("auto-resize")&&"false"!==this.getAttribute("auto-resize")},set:function(e){e&&!this.autoResize?this.setAttribute("auto-resize",""):!e&&this.autoResize&&this.removeAttribute("auto-resize"),zn(this)}}],[{key:"observedAttributes",get:function(){return["auto-resize"]}}]),t}(I(HTMLElement)),Tn=En(function(){return document.createElementNS("http://www.w3.org/2000/svg","svg")},function(e,t,a){var n=a.width,i=a.height;t.setAttribute("viewBox","0 0 ".concat(n," ").concat(i))}),Bn="d3fc-canvas,d3fc-svg{position:relative;display:block}d3fc-canvas>canvas,d3fc-svg>svg{position:absolute;height:100%;width:100%}d3fc-svg>svg{overflow:visible}",Rn=document.createElement("style");if(Rn.setAttribute("type","text/css"),document.querySelector("head").appendChild(Rn),Rn.styleSheet?Rn.styleSheet.cssText+=Bn:Rn.textContent+=Bn,"object"!==("undefined"==typeof customElements?"undefined":S(customElements))||"function"!=typeof customElements.define)throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var Yn=[],Ln=function(e,t){customElements.get(e)?Yn.push(e):customElements.define(e,t)};Ln("d3fc-canvas",Dn),Ln("d3fc-group",Pn),Ln("d3fc-svg",Tn),0<Yn.length&&console.warn("The d3fc components \"".concat(Yn.join(", "),"\" is/are already registered on window. Be aware that this can create compatibility issues if different versions are used."));var Mn=function(){for(var e={},t=function(t){for(var a=0,n=Object.keys(e),i;a<n.length;a++)i=n[a],t[i].apply(null,e[i]);return t},a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];for(var l=function(){var a=o[r];t[a]=function(){for(var n=arguments.length,i=Array(n),l=0;l<n;l++)i[l]=arguments[l];return i.length?(e[a]=i,t):e[a]}},r=0,o=n;r<o.length;r++)l();return t},Wn="d3fc-group.cartesian-chart{width:100%;height:100%;overflow:hidden;display:grid;display:-ms-grid;grid-template-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);grid-template-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);}\nd3fc-group.cartesian-chart>.top-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:1;-ms-grid-row:1;}\nd3fc-group.cartesian-chart>.top-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:2;-ms-grid-row:2;}\nd3fc-group.cartesian-chart>.left-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:1;-ms-grid-column:1;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.left-axis{width:3em;grid-column:2;-ms-grid-column:2;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.plot-area{overflow:hidden;grid-column:3;-ms-grid-column:3;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.right-axis{width:3em;grid-column:4;-ms-grid-column:4;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.right-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:5;-ms-grid-column:5;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.bottom-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:4;-ms-grid-row:4;}\nd3fc-group.cartesian-chart>.bottom-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:5;-ms-grid-row:5;}\nd3fc-group.cartesian-chart>.y-label{display:flex;transform:rotate(-90deg);width:1em;white-space:nowrap;justify-content:center;}",On=document.createElement("style");On.setAttribute("type","text/css"),document.querySelector("head").appendChild(On),On.styleSheet?On.styleSheet.cssText+=Wn:On.textContent+=Wn;var Hn=function(e){return"function"==typeof e?e:function(){return e}},Fn=function(){var e=Gn.apply(void 0,arguments),t=e.xScale,a=e.yScale,n=e.xAxis,i=e.yAxis,l=Hn(""),r=Hn(""),d=Hn(""),s=Hn(null),c=Hn(null),h=Hn("right"),g=Hn("bottom"),u=null,f=null,p=null,y=!1,m=!0,b=Mn("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),v=function(){},x=Mn("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),S=function(){},w=function(){},V=Me("d3fc-group","cartesian-chart"),k=Me("d3fc-canvas","webgl-plot-area"),C=Me("d3fc-canvas","canvas-plot-area"),A=Me("d3fc-svg","svg-plot-area"),_=Me("d3fc-svg","x-axis").key(function(e){return e}),E=Me("d3fc-svg","y-axis").key(function(e){return e}),D=Me("div","chart-label"),z=Me("div","x-label").key(function(e){return e}),I=Me("div","y-label").key(function(e){return e}),N=function(e){return function(t){return Le(e)?t.transition(e):t}},P=function(e){var P=N(e);e.each(function(e,N,T){var B=V(o.select(T[N]),[e]);B.enter().attr("auto-resize",""),D(B,[g(e)]).attr("class",function(e){return"top"===e?"chart-label bottom-label":"chart-label top-label"}).style("margin-bottom",function(e){return"top"===e?0:"1em"}).style("margin-top",function(e){return"top"===e?"1em":0}).text(l(e)),z(B,[g(e)]).attr("class",function(e){return"x-label ".concat(e,"-label")}).text(r(e)),I(B,[h(e)]).attr("class",function(e){return"y-label ".concat(e,"-label")}).text(d(e)),k(B,u?[e]:[]).attr("set-webgl-viewport","").classed("plot-area",!0).attr("use-device-pixel-ratio",m).on("draw",function(e,n){var i=e.detail,l=i.child,r=i.pixelRatio;u.context(y?null:l.getContext("webgl")).pixelRatio(r).xScale(t).yScale(a),u(n)}),B.select(".webgl-plot-area>canvas").on("webglcontextlost",function(e){console.warn("WebGLRenderingContext lost"),e.preventDefault(),y=!0,B.node().requestRedraw()}).on("webglcontextrestored",function(){console.info("WebGLRenderingContext restored"),y=!1,B.node().requestRedraw()}),C(B,f?[e]:[]).classed("plot-area",!0).attr("use-device-pixel-ratio",m).on("draw",function(e,n){var i=e.detail,l=i.child,r=i.pixelRatio,o=l.getContext("2d");o.save(),m&&o.scale(r,r),f.context(o).xScale(t).yScale(a),f(n),o.restore()}),A(B,p?[e]:[]).classed("plot-area",!0).on("draw",function(e,n){var i=e.detail.child;p.xScale(t).yScale(a),P(o.select(i).datum(n)).call(p)}),_(B,[g(e)]).attr("class",function(e){return"x-axis ".concat(e,"-axis")}).style("height",s(e)).on("measure",function(e,a){var n=e.detail,i=n.width,l=n.height,r=n.child;"top"===a&&o.select(r).attr("viewBox","0 ".concat(-l," ").concat(i," ").concat(l)),t.range([0,i])}).on("draw",function(e,a){var i=e.detail.child,l="top"===a?n.top(t):n.bottom(t);l.decorate(v),P(o.select(i).datum(a)).call(b(l))}),E(B,[h(e)]).attr("class",function(e){return"y-axis ".concat(e,"-axis")}).style("width",c(e)).on("measure",function(e,t){var n=e.detail,i=n.width,l=n.height,r=n.child;"left"===t&&o.select(r).attr("viewBox","".concat(-i," 0 ").concat(i," ").concat(l)),a.range([l,0])}).on("draw",function(e,t){var n=e.detail.child,l="left"===t?i.left(a):i.right(a);l.decorate(S),P(o.select(n).datum(t)).call(x(l))}),B.each(function(e,t,a){return a[t].requestRedraw()}),w(B,e,N)})},T=ke(/range\w*/,/tickFormat/);return we(P,t,T,Ee("x")),we(P,a,T,Ee("y")),we(P,b,Ee("x")),we(P,x,Ee("y")),P.xOrient=function(){return arguments.length?(g=Hn(0>=arguments.length?void 0:arguments[0]),P):g},P.yOrient=function(){return arguments.length?(h=Hn(0>=arguments.length?void 0:arguments[0]),P):h},P.xDecorate=function(){return arguments.length?(v=0>=arguments.length?void 0:arguments[0],P):v},P.yDecorate=function(){return arguments.length?(S=0>=arguments.length?void 0:arguments[0],P):S},P.chartLabel=function(){return arguments.length?(l=Hn(0>=arguments.length?void 0:arguments[0]),P):l},P.xLabel=function(){return arguments.length?(r=Hn(0>=arguments.length?void 0:arguments[0]),P):r},P.yLabel=function(){return arguments.length?(d=Hn(0>=arguments.length?void 0:arguments[0]),P):d},P.xAxisHeight=function(){return arguments.length?(s=Hn(0>=arguments.length?void 0:arguments[0]),P):s},P.yAxisWidth=function(){return arguments.length?(c=Hn(0>=arguments.length?void 0:arguments[0]),P):c},P.webglPlotArea=function(){return arguments.length?(u=0>=arguments.length?void 0:arguments[0],P):u},P.canvasPlotArea=function(){return arguments.length?(f=0>=arguments.length?void 0:arguments[0],P):f},P.svgPlotArea=function(){return arguments.length?(p=0>=arguments.length?void 0:arguments[0],P):p},P.decorate=function(){return arguments.length?(w=0>=arguments.length?void 0:arguments[0],P):w},P.useDevicePixelRatio=function(){return arguments.length?(m=0>=arguments.length?void 0:arguments[0],P):m},P},Gn=function(){for(var e={xScale:a.scaleIdentity(),yScale:a.scaleIdentity(),xAxis:{bottom:on,top:rn},yAxis:{right:sn,left:dn}},t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return 1!==n.length||n[0].domain||n[0].range?Object.assign(e,{xScale:n[0]||e.xScale,yScale:n[1]||e.yScale}):Object.assign(e,n[0])},Un=function(e){return"function"==typeof e?e:function(){return e}},qn=function(e,t){return function(){var a=Un(""),n=t,i=function(){},l=Fn.apply(void 0,arguments),r=function(t){e(l,n),l.decorate(function(e,t,n){e.enter().select(".x-label").style("height","1em").style("line-height","1em");var r=l.yOrient()(t);e.enter().append("div").attr("class","y-label-container").style("grid-column","left"===r?1:5).style("-ms-grid-column","left"===r?1:5).style("grid-row",3).style("-ms-grid-row",3).style("width","1em").style("display","flex").style("align-items","center").style("justify-content","center").style("white-space","nowrap").append("div").attr("class","y-label").style("transform","rotate(-90deg)"),e.select(".y-label-container>.y-label").text(a),i(e,t,n)}),t.call(l)};return we(r,l,Ce(/^x/,/^y/,"chartLabel")),r.yLabel=function(){return arguments.length?(a=Un(0>=arguments.length?void 0:arguments[0]),r):a},r.plotArea=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},r.decorate=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],r):i},r}},Qn=qn(function(e,t){return e.svgPlotArea(t)},at),Xn=qn(function(e,t){return e.canvasPlotArea(t)},nt),jn=function(e){return"x"===e?h.brushX():"y"===e?h.brushY():"xy"===e?h.brush():void 0},Zn=function(e){return[e[1],e[0]]},Kn=function(e){var t=jn(e),n=c.dispatch("brush","start","end"),i=a.scaleIdentity(),l=a.scaleIdentity(),r=Me("g","brush"),d=function(t,a,n){return"x"===e?t.map(a):"y"===e?t.map(n):"xy"===e?[[a(t[0][0]),n(t[0][1])],[a(t[1][0]),n(t[1][1])]]:void 0},s=function(e){return d(e,a.scaleLinear().domain(i.range()).invert,a.scaleLinear().domain(Zn(l.range())).invert)},h=function(e){return d(e,a.scaleLinear().domain(i.range()),a.scaleLinear().domain(Zn(l.range())))},g=function(t){var n=a.scaleLinear().domain(i.domain());return"x"===e?t.map(n.invert):"xy"===e?[n.invert(t[0][0]),n.invert(t[1][0])]:void 0},u=function(t){var n=a.scaleLinear().domain(Zn(l.domain()));return"y"===e?[t[1],t[0]].map(n.invert):"xy"===e?[n.invert(t[1][1]),n.invert(t[0][1])]:void 0},f=function(e){if(!(e.sourceEvent&&"draw"===e.sourceEvent.type))if(e.selection){var t=h(e.selection);n.call(e.type,{},{selection:t,xDomain:g(t),yDomain:u(t)})}else n.call(e.type,{},{})},p=function(e){e.each(function(e,a,n){t.extent([[i.range()[0],l.range()[1]],[i.range()[1],l.range()[0]]]),t.on("end",function(e){return f(e)}).on("brush",function(e){return f(e)}).on("start",function(e){return f(e)});var d=r(o.select(n[a]),[e]);d.call(t).call(t.move,e?s(e):null)})};return p.xScale=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],p):i},p.yScale=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],p):l},xe(p,n,"on"),xe(p,t,"filter","handleSize"),p},Jn=function(e,t){if(null==e&&null==t)return!0;var a=e.domain(),n=t.domain();return a.length===n.length&&a.every(function(e,t){var a;return(null===e||void 0===e?void 0:e.valueOf())===(null===(a=n[t])||void 0===a?void 0:a.valueOf())})},$n=function(e,t){return g.zoomIdentity.scale(e.k/t.k).translate(e.x-t.x,e.y-t.y)},ei=Symbol("d3fc-domain-zoom");e.annotationCanvasBand=function(){var e=a.scaleIdentity(),t=a.scaleIdentity(),n="horizontal",l=function(e){return e.from},r=function(e){return e.to},o=function(){},s=Ne().horizontalAlign("right").verticalAlign("top"),c=function(a){if("horizontal"!==n&&"vertical"!==n)throw new Error("Invalid orientation");var c=s.context(),h="horizontal"===n,g=h?e:t,u=h?t:e,f=g.range(),p=f[1]-f[0],y=h?"x":"y",m=h?"y":"x",b=h?"height":"width",v=h?"width":"height";a.forEach(function(e,t){c.save(),c.beginPath(),c.strokeStyle="transparent",s[m](u(l(e))),s[y](f[0]),s[v](p),s[b](u(r(e))-u(l(e))),o(c,e,t),s.context(c)([e],t),c.fill(),c.stroke(),c.closePath(),c.restore()})};return c.xScale=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],c):e},c.yScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],c):t},c.orient=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],c):n},c.decorate=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],c):o},c.fromValue=function(){return arguments.length?(l=Qa(0>=arguments.length?void 0:arguments[0]),c):l},c.toValue=function(){return arguments.length?(r=Qa(0>=arguments.length?void 0:arguments[0]),c):r},xe(c,s,"context"),c},e.annotationCanvasCrosshair=function(){var e=function(e){return e.x},t=function(e){return e.y},n=a.scaleIdentity(),i=a.scaleIdentity(),l=Pa(),r=ja(),o=ja().orient("vertical"),s=a.scaleIdentity(),c=a.scaleIdentity(),h=Ha().series([r,o,l]).xScale(s).yScale(c).mapping(function(e){return[e]}),g=function(a){a.forEach(function(a){s.range(n.range()),c.range(i.range()),l.crossValue(e).mainValue(t),r.value(t),o.value(e),h(a)})};g.x=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],g):e},g.y=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],g):t},g.xScale=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],g):n},g.yScale=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],g):i};var u=Ce("label","decorate");return we(g,r,u,Ee("y")),we(g,o,u,Ee("x")),xe(g,l,"decorate"),xe(g,h,"context"),g},e.annotationCanvasGridline=function(){var e=function(){},t=function(){},a=Za(),n=Za(),l=d.line(),r=function(){var r=l.context(),o=a.scale(),s=n.scale();a().forEach(function(t,a){r.save(),r.beginPath(),r.strokeStyle="#bbb",r.fillStyle="transparent",e(r,t,a),l.context(r)(s.domain().map(function(e){return[o(t),s(e)]})),r.fill(),r.stroke(),r.closePath(),r.restore()}),n().forEach(function(e,a){r.save(),r.beginPath(),r.strokeStyle="#bbb",r.fillStyle="transparent",t(r,e,a),l.context(r)(o.domain().map(function(t){return[o(t),s(e)]})),r.fill(),r.stroke(),r.closePath(),r.restore()})};return r.yDecorate=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.xDecorate=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],r):e},we(r,a,Ee("x")),we(r,n,Ee("y")),xe(r,l,"context"),r},e.annotationCanvasLine=ja,e.annotationSvgBand=function(){var e=a.scaleIdentity(),t=a.scaleIdentity(),n="horizontal",i=function(e){return e.from},l=function(e){return e.to},r=function(){},d=Me("g","annotation-band"),s=Ne().horizontalAlign("center").verticalAlign("center").x(0).y(0),c=function(a){if(Le(a)&&d.transition(a),"horizontal"!==n&&"vertical"!==n)throw new Error("Invalid orientation");var c="horizontal"===n,h=c?function(e,t){return"translate(".concat(e,", ").concat(t,")")}:function(e,t){return"translate(".concat(t,", ").concat(e,")")},g=c?e:t,u=c?t:e,f=g.range(),p=f[1]-f[0],y=c?"height":"width",m=c?"width":"height",b=function(){return h((f[1]+f[0])/2,(u(l.apply(void 0,arguments))+u(i.apply(void 0,arguments)))/2)};s[m](p),s[y](function(){return u(l.apply(void 0,arguments))-u(i.apply(void 0,arguments))}),a.each(function(e,t,a){var i=d(o.select(a[t]),e);i.enter().attr("transform",b).append("path").classed("band",!0),i.attr("class","annotation-band ".concat(n)).attr("transform",b).select("path").attr("d",function(e,t){return s([e],t)}),r(i,e,t)})};return c.xScale=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],c):e},c.yScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],c):t},c.orient=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],c):n},c.decorate=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],c):r},c.fromValue=function(){return arguments.length?(i=Qa(0>=arguments.length?void 0:arguments[0]),c):i},c.toValue=function(){return arguments.length?(l=Qa(0>=arguments.length?void 0:arguments[0]),c):l},c},e.annotationSvgCrosshair=function(){var e=function(e){return e.x},t=function(e){return e.y},n=a.scaleIdentity(),i=a.scaleIdentity(),l=function(){},r=Me("g","annotation-crosshair"),d=Na(),s=Xa(),c=Xa().orient("vertical"),h=a.scaleIdentity(),u=a.scaleIdentity(),f=Oa().series([s,c,d]).xScale(h).yScale(u).mapping(function(e){return[e]}),p=function(a){Le(a)&&r.transition(a),a.each(function(a,p,y){var m=r(o.select(y[p]),a);m.enter().style("pointer-events","none"),h.range(n.range()),u.range(i.range()),d.crossValue(e).mainValue(t),s.value(t),c.value(e),m.call(f),l(m,a,p)})};p.x=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],p):e},p.y=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],p):t},p.xScale=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],p):n},p.yScale=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],p):i},p.decorate=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],p):l};var m=Ce("label");return we(p,s,m,Ee("y")),we(p,c,m,Ee("x")),p},e.annotationSvgGridline=function(){var e=function(){},t=function(){},a=Za(),n=Za(),i=Me("line","gridline-y").key(Ka),l=Me("line","gridline-x").key(Ka),r=function(r){Le(r)&&(i.transition(r),l.transition(r)),r.each(function(r,d,s){var c=s[d],h=o.select(s[d]),g=a.scale(),u=n.scale(),f=c.__x_scale__||g;c.__x_scale__=g.copy();var p=a(),y=i(h,p);y.enter().attr("x1",f).attr("x2",f).attr("y1",u.range()[0]).attr("y2",u.range()[1]).attr("stroke","#bbb"),y.attr("x1",g).attr("x2",g).attr("y1",u.range()[0]).attr("y2",u.range()[1]),y.exit().attr("x1",g).attr("x2",g),e(y,p,d);var m=c.__y_scale__||u;c.__y_scale__=u.copy();var b=n(),v=l(h,b);v.enter().attr("y1",m).attr("y2",m).attr("x1",g.range()[0]).attr("x2",g.range()[1]).attr("stroke","#bbb"),v.attr("y1",u).attr("y2",u).attr("x1",g.range()[0]).attr("x2",g.range()[1]),v.exit().attr("y1",u).attr("y2",u),t(v,b,d)})};return r.yDecorate=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.xDecorate=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],r):e},we(r,i,Ae({key:"xKey"})),we(r,l,Ae({key:"yKey"})),we(r,a,Ee("x")),we(r,n,Ee("y")),r},e.annotationSvgLine=Xa,e.autoBandwidth=function(e){var a=.75,n=function(e){if(1>=e.length)return 10;e=Ua(e);var n=t.pairs(e).map(function(e){return be(e[0]-e[1])}),i=t.min(n);return a*i},i=function(t,a,i){if(t.bandwidth)return t.bandwidth();var l=Array.isArray(a)?(d=[]).concat.apply(d,Y(a)):a,r=l.filter(e.defined()).map(i()).map(t),o=n(r),d;return o},l=function(t){var a=function(t){if(e.xBandwidth&&e.yBandwidth)e.xBandwidth(i(e.xScale(),t,e.xValue)),e.yBandwidth(i(e.yScale(),t,e.yValue));else{var a=e.orient&&"horizontal"===e.orient()?e.yScale():e.xScale();e.bandwidth(i(a,t,e.crossValue))}};t instanceof o.selection?t.each(function(t,n,i){a(t),e(o.select(i[n]))}):(a(t),e(t))};return we(l,e),l.widthFraction=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},l},e.axisBottom=on,e.axisLabelOffset=function(e){var t="auto",a=function(){},n=function(){return"left"===e.orient()||"right"===e.orient()},l=function(){return"top"===e.orient()||"left"===e.orient()?-1:1},r=function(a){var i=hn(e)(a),r=i.maxHeight,o=i.maxWidth,d=i.labelCount,s=e.scale().range()[1],c="auto"===t?ue((n()?r:o)*d/s)+1:t,h=a.select("text"),g=h.attr("transform"),u=function(e){return n()?"translate(".concat(e%c*o*l(),", 0)"):"translate(0, ".concat(e%c*r*l(),")")};h.attr("transform",function(e,t){return"".concat(g," ").concat(u(t))})},o=function(t){return e(t)};return e.decorate(function(e){r(e),a(e)}),o.decorate=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],o):a},o.labelOffsetDepth=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],o):t},we(o,e,ke("decorate")),o},e.axisLabelRotate=function(e){var t="auto",a=function(){},n=function(){return"left"===e.orient()||"right"===e.orient()},i=function(){return"top"===e.orient()||"left"===e.orient()?-1:1},l=function(){switch(e.orient()){case"top":case"right":return"start";default:return"end";}},r=function(a){var r=hn(e)(a),o=r.maxHeight,d=r.maxWidth,s=r.labelCount,c=s*d,h;if("auto"===t){var g=e.scale().range()[1];h=g<c?90*fe(1,(c/g-.8)/2):0}else h=t;return{rotate:n()?ue(i()*(90-h)):ue(-h),maxHeight:o,maxWidth:d,anchor:h?l():"middle"}},o=function(e){var t=r(e),a=t.rotate,l=t.maxHeight,o=t.anchor,d=e.select("text"),s=d.attr("transform"),c=i()*ue(l/2),h=n()?"translate(".concat(c,", 0)"):"translate(0, ".concat(c,")");d.style("text-anchor",o).attr("transform","".concat(s," ").concat(h," rotate(").concat(a," 0 0)"))},d=function(t){e(t)};return e.decorate(function(e){o(e),a(e)}),d.decorate=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],d):a},d.labelRotate=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],d):t},we(d,e,ke("decorate")),d},e.axisLeft=dn,e.axisOrdinalBottom=function(e){return cn("bottom",e)},e.axisOrdinalLeft=function(e){return cn("left",e)},e.axisOrdinalRight=function(e){return cn("right",e)},e.axisOrdinalTop=function(e){return cn("top",e)},e.axisRight=sn,e.axisTop=rn,e.brush=function(){return Kn("xy")},e.brushX=function(){return Kn("x")},e.brushY=function(){return Kn("y")},e.bucket=le,e.chartCanvasCartesian=Xn,e.chartCartesian=Fn,e.chartSvgCartesian=Qn,e.dataJoin=Me,e.discontinuityIdentity=Z,e.discontinuityRange=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=function(e,t){return e>t[0]&&e<t[1]},i=function(e,t){return e[0]>=t[0]&&e[1]<=t[1]},l={};l.distance=function(e,a){e=l.clampUp(e),a=l.clampDown(a);var n=t.filter(function(t){return i(t,[e,a])}),r=n.map(function(e){return e[1]-e[0]});return a-e-r.reduce(function(e,t){return e+t},0)};var r=function(e,t){return e instanceof Date?new Date(e.getTime()+t):e+t};return l.offset=function(e,a){if(0<a){var n=function(){for(var n=l.clampUp(e),i=a,o;0<i;)if(o=t.filter(function(e){return e[0]>n}).sort(function(e,t){return e[0]-t[0]}),o.length){var d=o[0],s=d[0]-n;s>i?(n=r(n,i),i=0):(n=d[1],i-=s)}else n=r(n,i),i=0;return{v:n}}();if("object"===S(n))return n.v}else{var i=function(){for(var n=l.clampDown(e),i=a,o;0>i;)if(o=t.filter(function(e){return e[1]<n}).sort(function(e,t){return t[0]-e[0]}),o.length){var d=o[0],s=d[1]-n;s<i?(n=r(n,i),i=0):(n=d[0],i-=s)}else n=r(n,i),i=0;return{v:n}}();if("object"===S(i))return i.v}},l.clampUp=function(e){return t.reduce(function(e,t){return n(e,t)?t[1]:e},e)},l.clampDown=function(e){return t.reduce(function(e,t){return n(e,t)?t[0]:e},e)},l.copy=function(){return l},l},e.discontinuitySkipUtcWeekends=function(){return De(function(e){return e.getUTCDay()},n.utcDay,n.utcSaturday,n.utcMonday)},e.discontinuitySkipWeekends=function(){return De(function(e){return e.getDay()},n.timeDay,n.timeSaturday,n.timeMonday)},e.effectivelyZero=Ye,e.exclude=ke,e.extentDate=ee,e.extentLinear=$,e.extentTime=ee,e.feedGdax=ie,e.group=function(){var e="",t="vertical",a=function(e,t){return+e[t]},n=function(t){return Object.keys(t[0]).filter(function(t){return t!==e}).map(function(n){var i=t.filter(function(e){return e[n]}).map(function(t){var i=[t[e],a(t,n)];return i.data=t,i});return i.key=n,i})},i=function(t){return t.map(function(t){var n=Object.keys(t).filter(function(t){return t!==e}).map(function(e){var n=[e,a(t,e)];return n.data=t,n});return n.key=t[e],n})},l=function(e){return"vertical"===t?n(e):i(e)};return l.key=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},l.value=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},l.orient=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l},e.include=Ce,e.includeMap=Ae,e.indicatorBollingerBands=b,e.indicatorElderRay=j,e.indicatorEnvelope=X,e.indicatorExponentialMovingAverage=v,e.indicatorForceIndex=function(){var e=function(e){return e.volume},t=function(e){return e.close},a=v().period(13),n=m().period(2).defined(function(a){return null!=t(a)&&null!=e(a)}).accumulator(function(a){return a&&y((t(a[1])-t(a[0]))*e(a[1]))}),i=function(e){var t=n(e);return a(t)};return i.volumeValue=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],i):e},i.closeValue=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],i):t},xe(i,a,"period"),i},e.indicatorMacd=x,e.indicatorMovingAverage=Q,e.indicatorRelativeStrengthIndex=function(){var e=m().period(14),a=function(e,t){return t+(e[e.length-1]-t)/e.length},n=function(e){var t=B(e,2),a=t[0],n=t[1];return a<n?0:a-n},i=function(e){var t=B(e,2),a=t[0],n=t[1];return a>n?0:n-a},l=function(e,n){return void 0===n?t.mean(e):a(e,n)},r=function(){var e,a,r;return function(o){if(!o)return void(void 0!==e&&(e=NaN));if(void 0===e)return void(e=o[0]);var d=t.pairs([e].concat(Y(o)));a=l(d.map(n),a),r=l(d.map(i),r);var s=isNaN(e)?NaN:r/a;return y(100-100/(1+s))}},o=function(t){var a=r();return e.accumulator(a),e(t)};return xe(o,e,"period","value"),o},e.indicatorStochasticOscillator=function(){var e=function(e){return e.close},a=function(e){return e.high},n=function(e){return e.low},i=m().period(5).defined(function(t){return null!=e(t)&&null!=a(t)&&null!=n(t)}).accumulator(function(i){var l=i&&t.max(i,a),r=i&&t.min(i,n),o=i&&100*(e(i[i.length-1])-r)/(l-r);return y(o)}),l=Q().period(3),r=function(e){var t=i(e),a=l(t);return t.map(function(e,t){return{k:e,d:a[t]}})};return r.closeValue=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],r):e},r.highValue=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},r.lowValue=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},we(r,i,Ae({period:"kPeriod"})),we(r,l,Ae({period:"dPeriod"})),r},e.isTransition=Le,e.largestTriangleOneBucket=re,e.largestTriangleThreeBucket=oe,e.layoutAnnealing=function(){var e=1e3,t=1,a=function(e){switch(e.location){case"bottom-right":return 0;case"middle-right":case"bottom-center":return e.width*e.height/8;}return e.width*e.height/4},n=function(e){return r?e.width*e.height-Oe(e,r):0},i=function(e,t,i){return He(i,t)+n(e)+a(e)},l=function(a){for(var n=e,l=function(e,t){return ye((t-e)/n)>Math.random()},r=Qe().locationScore(i).winningScore(l).rectangles(a);0<n;){var o=je(a),d=Xe(Ge(a[o]));r=r(d,o),n-=t}return r.rectangles()},r;return l.temperature=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},l.cooling=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l.bounds=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],l):r},l},e.layoutBoundingBox=function(){var e=[0,0],t=function(t){return t.map(function(t){var a=t.x,n=t.y;return a+t.width>e[0]&&(a-=t.width),n+t.height>e[1]&&(n-=t.height),{height:t.height,width:t.width,x:a,y:n}})};return t.bounds=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],t):e},t},e.layoutGreedy=function(){var e=function(e){return n?e.width*e.height-Oe(e,n):0},t=function(t,a,n){return He(n,a)+e(t)},a=function(e){var a=Qe().locationScore(t).rectangles(e);return e.forEach(function(e,t){Ge(e).forEach(function(e){a=a(e,t)})}),a.rectangles()},n;return a.bounds=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],a):n},a},e.layoutLabel=function(e){var t=function(){},n=function(){return[0,0]},l=function(e){return[e.x,e.y]},r=e||function(e){return e},d=function(){},s=a.scaleIdentity(),c=a.scaleIdentity(),h=Me("g","label"),g=function(e){e.each(function(e,a,i){var u=h(o.select(i[a]),e).call(d),g=u.nodes(),f=g.map(function(e,t){var a=o.select(e).datum(),i=l(a,t,g),r=[s(i[0]),c(i[1])],d=n(a,t,g);return{hidden:!1,x:r[0],y:r[1],width:d[0],height:d[1]}}),p=r(f);u.attr("style",function(e,t){return"display:"+(p[t].hidden?"none":"inherit")}).attr("transform",function(e,t){return"translate("+p[t].x+", "+p[t].y+")"}).attr("layout-width",function(e,t){return p[t].width}).attr("layout-height",function(e,t){return p[t].height}).attr("anchor-x",function(e,t){return f[t].x-p[t].x}).attr("anchor-y",function(e,t){return f[t].y-p[t].y}),u.call(d),t(u,e,a)})};return we(g,h,Ce("key")),we(g,r),g.size=function(){return arguments.length?(n=Re(0>=arguments.length?void 0:arguments[0]),g):n},g.position=function(){return arguments.length?(l=Re(0>=arguments.length?void 0:arguments[0]),g):l},g.component=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],g):d},g.decorate=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],g):t},g.xScale=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],g):s},g.yScale=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],g):c},g},e.layoutRemoveOverlaps=function(e){e=e||function(e){return e};var t=function(t){t=e(t);for(var a=function(){var e=t.filter(function(e){return!e.hidden}),a=e.map(function(t,a){return[t,He(e,a)]}),n=Ze(a,function(e,t){return t[1]-e[1]});return 0<n[1]?void(n[0].hidden=!0):"break"},n;n=a(),"break"!==n;);return t};return we(t,e),t},e.layoutTextLabel=function(){var e=2,t=function(e){return e},a=Me("text"),n=Me("rect"),i=Me("circle"),l=function(l){l.each(function(l,r,d){var s=d[r],c=o.select(s),h=+s.getAttribute("layout-width"),g=+s.getAttribute("layout-height"),u=n(c,[l]);u.attr("width",h).attr("height",g);var f=+s.getAttribute("anchor-x"),p=+s.getAttribute("anchor-y"),y=i(c,[l]);y.attr("r",2).attr("cx",f).attr("cy",p);var m=a(c,[l]);m.enter().attr("dy","0.9em").attr("transform","translate(".concat(e,", ").concat(e,")")),m.text(t)})};return l.padding=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},l.value=function(){return arguments.length?(t=Re(0>=arguments.length?void 0:arguments[0]),l):t},l},e.modeMedian=de,e.pointer=function(){function e(e){var t=o.pointer(e);a.call("point",this,[{x:t[0],y:t[1]}])}function t(){void a.call("point",this,[])}var a=c.dispatch("point"),n=function(a){a.on("mouseenter.pointer",e).on("mousemove.pointer",e).on("mouseleave.pointer",t)};return xe(n,a,"on"),n},e.prefix=Ee,e.randomFinancial=ne,e.randomGeometricBrownianMotion=te,e.randomSkipWeekends=function(e){var t=e.date.getDay();return 0!==t&&6!==t},e.rebind=xe,e.rebindAll=we,e.scaleDiscontinuous=J,e.seriesCanvasArea=function(){var e=et(),t=d.area(),a=function(a){var n=t.context();t.defined(e.defined());var l=a.map(e.values);t.x(function(e,t){return l[t].transposedX}).y(function(e,t){return l[t].transposedY});var r="vertical"===e.orient()?"y":"x";t[r+"0"](function(e,t){return l[t].y0}),t[r+"1"](function(e,t){return l[t].y}),n.beginPath(),n.fillStyle=tt.gray,n.strokeStyle="transparent",e.decorate()(n,a),t(a),n.fill(),n.stroke(),n.closePath()};return we(a,e,ke("bandwidth","align")),xe(a,t,"curve","context"),a},e.seriesCanvasBar=function(){var e=et(),t=Ne().x(0).y(0),a=function(t){return"vertical"===e.orient()?t.height:t.width},n=function(t){return"vertical"===e.orient()?t.width:t.height},i=function(i){var l=t.context(),r=i.filter(e.defined()),o=r.map(e.values);"vertical"===e.orient()?(t.verticalAlign("top"),t.horizontalAlign("center")):(t.horizontalAlign("right"),t.verticalAlign("center")),o.forEach(function(r,o){l.save(),l.beginPath(),l.translate(r.origin[0],r.origin[1]),l.fillStyle=tt.darkGray,l.strokeStyle="transparent",e.decorate()(l,r.d,o),a(t)(-r.height),n(t)(r.width),t([r]),l.fill(),l.stroke(),l.closePath(),l.restore()})};return we(i,e),xe(i,t,"context"),i},e.seriesCanvasBoxPlot=function(){var e=Ma(),t=Te().value(0),a=function(a){var n=a.filter(e.defined()),l=t.context();t.orient(e.orient()),n.forEach(function(a,n){l.save();var i=e.values(a,n);l.translate(i.origin[0],i.origin[1]),l.beginPath(),l.fillStyle=tt.gray,l.strokeStyle=tt.black,e.decorate()(l,a,n),t.median(i.median).upperQuartile(i.upperQuartile).lowerQuartile(i.lowerQuartile).high(i.high).width(i.width).low(i.low)([a]),l.fill(),l.stroke(),l.closePath(),l.restore()})};return we(a,e),xe(a,t,"cap","context"),a},e.seriesCanvasCandlestick=function(){return Ya(Pe())},e.seriesCanvasErrorBar=function(){var e=Ta(),t=Be().value(0),a=function(a){var n=a.filter(e.defined()),l=t.context();t.orient(e.orient()),n.forEach(function(a,n){l.save();var i=e.values(a,n);l.translate(i.origin[0],i.origin[1]),l.beginPath(),l.strokeStyle=tt.black,l.fillStyle=tt.gray,e.decorate()(l,a,n),t.high(i.high).width(i.width).low(i.low)([a]),l.fill(),l.stroke(),l.closePath(),l.restore()})};return we(a,e),xe(a,t,"context"),a},e.seriesCanvasGrouped=function(e){var t=Ga(),a=function(a){a.forEach(function(n,l){var r="horizontal"!==e.orient(),o=function(e,n){var i=t.offsetScaleForDatum(a,e,n),o=r?t.xScale():t.yScale();return o(e)+i(l)+i.bandwidth()/2};r?(e.xScale(o),e.yScale(t.yScale())):(e.yScale(o),e.xScale(t.xScale())),e.bandwidth&&e.bandwidth(function(e,n){return t.offsetScaleForDatum(a,e,n).bandwidth()}),e.decorate(function(e,a){return t.decorate()(e,a,l)}),e(n)})};return we(a,e,ke("decorate","xScale","yScale")),we(a,t,ke("offsetScaleForDatum")),a},e.seriesCanvasHeatmap=function(){var e=qa(),t=function(t){var a=t.filter(e.defined()),n=e.colorInterpolate(),l=e.colorScale(a),r=e.pathGenerator.context();a.forEach(function(t,a){r.save(),r.beginPath();var i=e.values(t,a);r.translate(i.x,i.y),r.fillStyle=n(l(i.colorValue)),r.strokeStyle="transparent",e.decorate()(r,t,a),e.pathGenerator.height(i.height).width(i.width)([t]),r.fill(),r.stroke(),r.closePath(),r.restore()})};return xe(t,e.pathGenerator,"context"),we(t,e),t},e.seriesCanvasLine=nt,e.seriesCanvasMulti=Ha,e.seriesCanvasOhlc=function(){return Ya(Ie())},e.seriesCanvasPoint=Pa,e.seriesCanvasRepeat=function(){var e="vertical",t=nt(),a=Ha(),n=function(n){"vertical"===e?a.series(n[0].map(function(){return t})).mapping(function(e,t){return e.map(function(e){return e[t]})}):a.series(n.map(function(){return t})).mapping(function(e,t){return e[t]}),a(n)};return n.series=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],n):t},n.orient=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],n):e},we(n,a,ke("series","mapping")),n},e.seriesSvgArea=function(){var e=et(),t=d.area(),a=Me("path","area"),n=function(n){Le(n)&&a.transition(n),t.defined(e.defined()),n.each(function(n,i,l){var r=n.map(e.values);t.x(function(e,t){return r[t].transposedX}).y(function(e,t){return r[t].transposedY});var d="vertical"===e.orient()?"y":"x";t[d+"0"](function(e,t){return r[t].y0}),t[d+"1"](function(e,t){return r[t].y});var s=a(o.select(l[i]),[n]);s.enter().attr("fill",tt.gray),s.attr("d",t),e.decorate()(s,n,i)})};return we(n,e,ke("bandwidth","align")),xe(n,a,"key"),xe(n,t,"curve"),n},e.seriesSvgBar=function(){var e=Ne().x(0).y(0),t=et(),a=Me("g","bar"),n=function(e){return"vertical"===t.orient()?e.height:e.width},l=function(e){return"vertical"===t.orient()?e.width:e.height},r=function(e){return"translate("+e[0]+", "+e[1]+")"},d=function(i){Le(i)&&a.transition(i),i.each(function(i,d,s){var c=t.orient();if("vertical"!==c&&"horizontal"!==c)throw new Error("The bar series does not support an orientation of "+c);var h=i.filter(t.defined()),u=h.map(t.values);e.width(0).height(0),"vertical"===t.orient()?(e.verticalAlign("top"),e.horizontalAlign("center")):(e.horizontalAlign("right"),e.verticalAlign("center"));var f=a(o.select(s[d]),h);f.enter().attr("transform",function(e,t){return r(u[t].baseOrigin)}).attr("class","bar "+t.orient()).attr("fill",tt.darkGray).append("path").attr("d",function(t,a){return l(e)(u[a].width),e([t])}),f.attr("transform",function(e,t){return r(u[t].origin)}).select("path").attr("d",function(t,a){return l(e)(u[a].width),n(e)(-u[a].height),e([t])}),t.decorate()(f,h,d)})};return we(d,t),xe(d,a,"key"),d},e.seriesSvgBoxPlot=function(){var e=Ma(),t=Me("g","box-plot"),a=Te().value(0),n=function(e){return function(t){return Le(e)?t.transition(e):t}},l=function(e){return"translate("+e.origin[0]+", "+e.origin[1]+")"},r=function(i){Le(i)&&t.transition(i);var r=n(i);i.each(function(n,i,d){var s=n.filter(e.defined()),c=t(o.select(d[i]),s);c.enter().attr("stroke",tt.black).attr("fill",tt.gray).attr("transform",function(t,a){return l(e.values(t,a))+" scale(1e-6, 1)"}).append("path"),a.orient(e.orient()),c.each(function(t,n,i){var d=e.values(t,n);a.median(d.median).upperQuartile(d.upperQuartile).lowerQuartile(d.lowerQuartile).width(d.width).high(d.high).low(d.low),r(o.select(i[n])).attr("transform",l(d)).select("path").attr("d",a([t]))}),e.decorate()(c,n,i)})};return we(r,e),xe(r,t,"key"),xe(r,a,"cap"),r},e.seriesSvgCandlestick=function(){return Ra(Pe(),"candlestick")},e.seriesSvgErrorBar=function(){var e=Ta(),t=Me("g","error-bar"),a=Be().value(0),n=function(e){return function(t){return Le(e)?t.transition(e):t}},l=function(e){return"translate("+e.origin[0]+", "+e.origin[1]+")"},r=function(i){Le(i)&&t.transition(i);var r=n(i);i.each(function(n,i,d){var s=n.filter(e.defined()),c=s.map(e.values),h=t(o.select(d[i]),s);h.enter().attr("stroke",tt.black).attr("fill",tt.gray).attr("transform",function(t,a){return l(e.values(t,a))+" scale(1e-6, 1)"}).append("path"),a.orient(e.orient()),h.each(function(e,t,n){var i=c[t];a.high(i.high).low(i.low).width(i.width),r(o.select(n[t])).attr("transform",l(i)+" scale(1)").select("path").attr("d",a([e]))}),e.decorate()(h,n,i)})};return we(r,e),xe(r,t,"key"),r},e.seriesSvgGrouped=function(e){var t=Ga(),a=Me("g","grouped"),n=function(n){Le(n)&&a.transition(n),n.each(function(n,i,l){var r=a(o.select(l[i]),n);r.enter().append("g"),r.select("g").each(function(a,l,r){var d=o.select(r[l]),s="horizontal"!==e.orient(),c=function(e,a){var i=t.offsetScaleForDatum(n,e,a),r=s?t.xScale():t.yScale();return r(e)+i(l)+i.bandwidth()/2};s?(e.xScale(c),e.yScale(t.yScale())):(e.yScale(c),e.xScale(t.xScale())),e.bandwidth&&e.bandwidth(function(e,a){return t.offsetScaleForDatum(n,e,a).bandwidth()}),e.decorate(function(e,a){return t.decorate()(e,a,l)}),d.call(e)})})};return we(n,e,ke("decorate","xScale","yScale")),we(n,t,ke("offsetScaleForDatum")),n},e.seriesSvgHeatmap=function(){var e=qa(),t=Me("g","box"),a=function(e){return"translate("+e.x+", "+e.y+")"},n=function(n){n.each(function(n,i,l){var r=n.filter(e.defined()),s=e.colorValue(),c=e.colorInterpolate(),h=e.colorScale(r),u=t(o.select(l[i]),r);u.enter().append("path").attr("stroke","transparent"),u.attr("transform",function(t,n){return a(e.values(t,n))}).select("path").attr("d",function(t,a){return e.pathGenerator.width(e.values(t,a).width).height(e.values(t,a).height)([t])}).attr("fill",function(e,t){return c(h(s(e,t)))}),e.decorate()(u,n,i)})};return we(n,e),n},e.seriesSvgLine=at,e.seriesSvgMulti=Oa,e.seriesSvgOhlc=function(){return Ra(Ie(),"ohlc")},e.seriesSvgPoint=Na,e.seriesSvgRepeat=function(){var e="vertical",t=at(),a=Oa(),n=function(n){return n.each(function(n,i,l){"vertical"===e?a.series(n[0].map(function(){return t})).mapping(function(e,t){return e.map(function(e){return e[t]})}):a.series(n.map(function(){return t})).mapping(function(e,t){return e[t]}),o.select(l[i]).call(a)})};return n.series=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],n):t},n.orient=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],n):e},we(n,a,ke("series","mapping")),n},e.seriesWebglArea=function(){var e=et(),t=ha(0,1),a=t.offset(1),n=ha(0,1),i=n.offset(1),l=ha(0,1),r=l.offset(1),o=ha(0,1).type(Ft.UNSIGNED_BYTE),d=o.offset(1),s=jt().crossValueAttribute(t).crossNextValueAttribute(a).mainValueAttribute(n).mainNextValueAttribute(i).baseValueAttribute(l).baseNextValueAttribute(r).definedAttribute(o).definedNextAttribute(d),c=function(){return!1},h=wa,g=[],u=null,f=null,p=function(a){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var r=h(e.xScale()),p=h(e.yScale()),y=!c(g,a);y&&(g=a,o.value(function(t,a){return e.defined()(t,a)}).data(a)),(y||r.scale!==u)&&(u=r.scale,t.value(function(t,a){return r.scale(e.crossValue()(t,a))}).data(a)),(y||p.scale!==f)&&(f=p.scale,l.value(function(t,a){return p.scale(e.baseValue()(t,a))}).data(a),n.value(function(t,a){return p.scale(e.mainValue()(t,a))}).data(a)),s.xScale(r.webglScale).yScale(p.webglScale).decorate(function(t){return e.decorate()(t,a,0)}),s(a.length)};return p.equals=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],p):c},p.scaleMapper=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],p):h},we(p,e,ke("bandwidth","align")),xe(p,s,"context","pixelRatio"),p},e.seriesWebglBar=function(){var e=et(),t=Qt(),a=Qt(),n=Qt(),i=Qt().type(Ft.UNSIGNED_SHORT),l=Qt().type(Ft.UNSIGNED_BYTE),r=ia().crossValueAttribute(t).mainValueAttribute(a).baseValueAttribute(n).bandwidthAttribute(i).definedAttribute(l),o=function(){return!1},d=wa,s=[],c=null,h=null,g=function(g){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var u=d(e.xScale()),f=d(e.yScale()),p=!o(s,g);p&&(s=g,i.value(function(t,a){return e.bandwidth()(t,a)}).data(g),l.value(function(t,a){return e.defined()(t,a)}).data(g)),(p||u.scale!==c)&&(c=u.scale,t.value(function(t,a){return u.scale(e.crossValue()(t,a))}).data(g)),(p||f.scale!==h)&&(h=f.scale,n.value(function(t,a){return f.scale(e.baseValue()(t,a))}).data(g),a.value(function(t,a){return f.scale(e.mainValue()(t,a))}).data(g)),r.xScale(u.webglScale).yScale(f.webglScale).decorate(function(t){return e.decorate()(t,g,0)}),r(g.length)};return g.equals=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],g):o},g.scaleMapper=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],g):d},we(g,e,ke("align")),xe(g,r,"context","pixelRatio"),g},e.seriesWebglBoxPlot=function(){var e=Ma(),t=Qt(),a=Qt(),n=Qt(),i=Qt(),l=Qt(),r=Qt(),o=Qt().type(Ft.UNSIGNED_SHORT),d=Qt().type(Ft.UNSIGNED_SHORT),s=Qt().type(Ft.UNSIGNED_BYTE),c=ca().crossValueAttribute(t).highValueAttribute(a).upperQuartileValueAttribute(n).medianValueAttribute(i).lowerQuartileValueAttribute(l).lowValueAttribute(r).bandwidthAttribute(o).capAttribute(d).definedAttribute(s),h=function(){return!1},g=wa,u=[],f=null,p=null,y=Ke(20),m=function(m){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var b=g(e.xScale()),v=g(e.yScale()),x=!h(u,m);x&&(u=m,o.value(function(t,a){return e.bandwidth()(t,a)}).data(m),d.value(function(e,t){return y(e,t)}).data(m),s.value(function(t,a){return e.defined()(t,a)}).data(m)),(x||b.scale!==f)&&(f=b.scale,t.value(function(t,a){return b.scale(e.crossValue()(t,a))}).data(m)),(x||v.scale!==p)&&(p=v.scale,a.value(function(t,a){return v.scale(e.highValue()(t,a))}).data(m),n.value(function(t,a){return v.scale(e.upperQuartileValue()(t,a))}).data(m),i.value(function(t,a){return v.scale(e.medianValue()(t,a))}).data(m),l.value(function(t,a){return v.scale(e.lowerQuartileValue()(t,a))}).data(m),r.value(function(t,a){return v.scale(e.lowValue()(t,a))}).data(m)),c.xScale(b.webglScale).yScale(v.webglScale).decorate(function(t){return e.decorate()(t,m,0)}),c(m.length)};return m.cap=function(){return arguments.length?(y=Ke(0>=arguments.length?void 0:arguments[0]),m):y},m.equals=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],m):h},m.scaleMapper=function(){return arguments.length?(g=0>=arguments.length?void 0:arguments[0],m):g},we(m,e,ke("align")),xe(m,c,"context","lineWidth","pixelRatio"),m},e.seriesWebglCandlestick=function(){return La(da())},e.seriesWebglErrorBar=function(){var e=Ta(),t=Qt(),a=Qt(),n=Qt(),i=Qt().type(Ft.UNSIGNED_SHORT),l=Qt().type(Ft.UNSIGNED_BYTE),r=ra().crossValueAttribute(t).highValueAttribute(a).lowValueAttribute(n).bandwidthAttribute(i).definedAttribute(l),o=function(){return!1},d=wa,s=[],c=null,h=null,g=function(g){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var u=d(e.xScale()),f=d(e.yScale()),p=!o(s,g);p&&(s=g,i.value(function(t,a){return e.bandwidth()(t,a)}).data(g),l.value(function(t,a){return e.defined()(t,a)}).data(g)),(p||u.scale!==c)&&(c=u.scale,t.value(function(t,a){return u.scale(e.crossValue()(t,a))}).data(g)),(p||f.scale!==h)&&(h=f.scale,a.value(function(t,a){return f.scale(e.highValue()(t,a))}).data(g),n.value(function(t,a){return f.scale(e.lowValue()(t,a))}).data(g)),r.xScale(u.webglScale).yScale(f.webglScale).decorate(function(t){return e.decorate()(t,g,0)}),r(g.length)};return g.equals=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],g):o},g.scaleMapper=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],g):d},we(g,e,ke("align")),xe(g,r,"context","lineWidth","pixelRatio"),g},e.seriesWebglLine=Ia,e.seriesWebglMulti=Fa,e.seriesWebglOhlc=function(){return La(aa())},e.seriesWebglPoint=function(){var e=et(),t=Ke(64),a=d.symbolCircle,n=Qt(),i=Qt(),l=Qt().type(Ft.UNSIGNED_SHORT),r=Qt().type(Ft.UNSIGNED_BYTE),o=Kt().crossValueAttribute(n).mainValueAttribute(i).sizeAttribute(l).definedAttribute(r),s=function(){return!1},c=wa,h=[],g=null,u=null,f=function(d){var f=c(e.xScale()),p=c(e.yScale()),y=!s(h,d);y&&(h=d,l.value(function(e,a){return t(e,a)}).data(d),r.value(function(t,a){return e.defined()(t,a)}).data(d)),(y||f.scale!==g)&&(g=f.scale,"vertical"===e.orient()?n.value(function(t,a){return f.scale(e.crossValue()(t,a))}).data(d):n.value(function(t,a){return f.scale(e.mainValue()(t,a))}).data(d)),(y||p.scale!==u)&&(u=p.scale,"vertical"===e.orient()?i.value(function(t,a){return p.scale(e.mainValue()(t,a))}).data(d):i.value(function(t,a){return p.scale(e.crossValue()(t,a))}).data(d)),o.xScale(f.webglScale).yScale(p.webglScale).type(Da(a)).decorate(function(t){return e.decorate()(t,d,0)}),o(d.length)};return f.size=function(){return arguments.length?(t=Ke(0>=arguments.length?void 0:arguments[0]),f):t},f.type=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],f):a},f.equals=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],f):s},f.scaleMapper=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],f):c},we(f,e,ke("baseValue","bandwidth","align")),xe(f,o,"context","pixelRatio"),f},e.seriesWebglRepeat=function(){var e="vertical",t=function(){return Ia()},a=Fa(),n=[],i=function(i){if("vertical"===e){var l=n;n=i[0].map(function(e,a){return a<l.length?l[a]:t()}),a.series(n).mapping(function(e,t){return e.map(function(e){return e[t]})})}else{var r=n;n=i.map(function(e,a){return a<r.length?r[a]:t()}),a.series(n).mapping(function(e,t){return e[t]})}a(i)};return i.series=function(){for(var e=arguments.length,a=Array(e),l=0;l<e;l++)a[l]=arguments[l];return a.length?(t="function"==typeof a[0].xScale&&"function"==typeof a[0].yScale?function(){return a[0]}:a[0],n=[],i):t},i.orient=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],n=[],i):e},we(i,a,ke("series","mapping")),i},e.shapeBar=Ne,e.shapeBoxPlot=Te,e.shapeCandlestick=Pe,e.shapeErrorBar=Be,e.shapeOhlc=Ie,e.webglAdjacentAttribute=ha,e.webglAttribute=Qt,e.webglBaseAttribute=Gt,e.webglBufferBuilder=lt,e.webglElementIndices=$t,e.webglFillColor=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0,0,1],t=Qt().size(4),a=e,n=!0,i=function(e){if(e.vertexShader().appendHeaderIfNotExists(gt.header).appendBodyIfNotExists(gt.body),e.fragmentShader().appendHeaderIfNotExists(Wt.header).appendBodyIfNotExists(Wt.body),Array.isArray(a))e.buffers().attribute("aFillColor",za(a).size(4));else if("function"==typeof a){if(!n)return;t.value(a),e.buffers().attribute("aFillColor",t)}else throw new Error("Expected value to be an array or function, received ".concat(a));n=!1};return i.value=function(){return arguments.length?(a!==(0>=arguments.length?void 0:arguments[0])&&(a=0>=arguments.length?void 0:arguments[0],n=!0),i):a},xe(i,t,"data"),i},e.webglProgramBuilder=dt,e.webglScaleLinear=ga,e.webglScaleLog=ua,e.webglScaleMapper=wa,e.webglScalePow=fa,e.webglSeriesArea=jt,e.webglSeriesBar=ia,e.webglSeriesBoxPlot=ca,e.webglSeriesCandlestick=da,e.webglSeriesErrorBar=ra,e.webglSeriesLine=ea,e.webglSeriesOhlc=aa,e.webglSeriesPoint=Kt,e.webglShaderBuilder=st,e.webglStrokeColor=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0,0,1],t=Qt().size(4),a=e,n=!0,i=function(e){if(e.vertexShader().appendHeaderIfNotExists(ut.header).appendBodyIfNotExists(ut.body),e.fragmentShader().appendHeaderIfNotExists(Ot.header).appendBodyIfNotExists(Ot.body),Array.isArray(a))e.buffers().attribute("aStrokeColor",za(a).size(4));else if("function"==typeof a){if(!n)return;t.value(a),e.buffers().attribute("aStrokeColor",t)}else throw new Error("Expected value to be an array or function, received ".concat(a));n=!1};return i.value=function(){return arguments.length?(a!==(0>=arguments.length?void 0:arguments[0])&&(a=0>=arguments.length?void 0:arguments[0],n=!0),i):a},xe(i,t,"data"),i},e.webglSymbolMapper=Da,e.webglTypes=Ft,e.webglUniform=rt,e.zoom=function(){var e=c.dispatch("zoom"),t=g.zoom().on("zoom",function(a){var n=a.transform,i=this,l=n,r=i[ei],d=r.originalXScale,s=r.previousXScale,c=r.xScale,h=r.originalYScale,g=r.previousYScale,u=r.yScale,f=r.previousTransform;Jn(s,c)&&Jn(g,u)||(d=null===c||void 0===c?void 0:c.copy(),h=null===u||void 0===u?void 0:u.copy(),l=$n(n,f)),null!=c&&(s=l.rescaleX(d.range(c.range())),c.domain(s.domain())),null!=u&&(g=l.rescaleY(h.range(u.range())),u.domain(g.domain())),f=l,i[ei]={originalXScale:d,previousXScale:s,xScale:c,originalYScale:h,previousYScale:g,yScale:u,previousTransform:f},l!==n&&t.transform(o.select(i),l),e.call("zoom")}),a=function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;null==a&&null==n&&console.warn("Without an xScale and/or yScale specified, this component won't do anything. Perhaps you forgot to specify them e.g. selection.call(zoom, x, y)?"),e.each(function(e,t,i){var l=i[t][ei];null!=l&&l.xScale===a&&l.yScale===n&&console.warn("This component should only be called on a selection once. Perhaps you're missing an .enter()?");var r=null===a||void 0===a?void 0:a.copy(),o=null===n||void 0===n?void 0:n.copy();i[t][ei]={originalXScale:r,previousXScale:r,xScale:a,originalYScale:o,previousYScale:o,yScale:n,previousTransform:g.zoomIdentity}}).call(t)};return xe(a,e,"on"),xe(a,t,"extent","filter","wheelDelta","touchable","clickDistance","tapDistance","duration","interpolate"),a},Object.defineProperty(e,"__esModule",{value:!0})});
